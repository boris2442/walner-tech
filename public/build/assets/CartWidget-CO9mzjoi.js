import{a5 as I,y,c as b,B,a as o,b as e,g as p,e as k,u as W,M as D,t as i,w as N,o as n,F as S,z as T,V,D as j}from"./app-jMmKu1lG.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const d=I({items:JSON.parse(localStorage.getItem("cart")||"[]"),save(){localStorage.setItem("cart",JSON.stringify(this.items))},add(a){const t=this.items.find(l=>l.id===a.id);t?t.quantity+=1:this.items.push({...a,quantity:1}),this.save()},increase(a){a.quantity++,this.save()},decrease(a){if(a.quantity>1)a.quantity--;else{const t=this.items.findIndex(l=>l.id===a.id);t!==-1&&this.items.splice(t,1)}this.save()},totalItems(){return this.items.reduce((a,t)=>a+t.quantity,0)},totalPrice(){return this.items.reduce((a,t)=>a+t.prix*t.quantity,0)}}),E={class:"fixed bottom-6 right-6 z-50 flex flex-col items-end"},O={key:0,class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs"},P={key:0,class:"absolute bottom-14 right-0 bg-red-500 text-white text-xs py-1 px-2 rounded shadow-lg"},z={key:0,class:"cart-widget absolute bottom-14 right-0 z-50 w-80 max-h-96 bg-[var(--accent-cyan)] dark:bg-dark-background shadow-lg rounded-lg overflow-y-auto p-3 cart-scroll mt-2"},J={key:0,class:"text-sm text-gray-400 dark:text-dark-grey text-center"},M=["src"],R={class:"flex-1"},U={class:"text-sm font-medium truncate text-gray-100"},Z={class:"text-xs text-[var(--dark-gold)]"},G={class:"flex items-center mt-1 gap-1"},H=["onClick"],K={class:"px-2"},Q=["onClick"],X={class:"flex justify-between font-semibold"},Y={class:"text-[var(--dark-white)] underline"},tt=["disabled"],et={__name:"CartWidget",setup(a){const t=y(!1);function l(){t.value=!t.value}const u=b(()=>d.items),h=b(()=>d.totalItems()),_=b(()=>d.totalPrice());function w(r){d.increase(r)}function C(r){d.decrease(r)}function q(r){return r?`/${r}`:"/fallback.png"}function F(){const s=j().props.auth?.user?.name||"Client Walner Tech",f="237657961059";let x=`*Bonjour √©quipe Walner Tech üëã,*
Je souhaite confirmer ma commande. Voici le r√©capitulatif :

`;u.value.forEach(g=>{x+=`‚Ä¢ ${g.title} (x${g.quantity}) ‚Äî ${g.prix*g.quantity} FCFA
`});const A=new Date().toLocaleString("fr-FR",{timeZone:"Africa/Douala"});x+=`
*Montant total :* ${_.value} FCFA
üïí *Date de commande :* ${A}

Merci de bien vouloir me confirmer la disponibilit√© et les modalit√©s de livraison.

üë§ *Nom du client :* ${s}

Cordialement,
${s}
`,window.open(`https://wa.me/${f}?text=${encodeURIComponent(x)}`,"_blank")}const m=y(null),v=y(!1);function $(){m.value&&(m.value.classList.add("animate-shake"),v.value=!0,setTimeout(()=>{m.value.classList.remove("animate-shake"),v.value=!1},800))}return B(h,r=>{r===0&&$()}),(r,c)=>(n(),o("div",E,[e("button",{onClick:l,type:"button",title:"Ouvrir le panier","aria-label":"Bouton ouvrir le panier",ref_key:"cartButton",ref:m,class:"relative bg-[var(--primary-blue)] rounded-full w-12 h-12 flex items-center justify-center text-[var(--dark-gold)] shadow-lg hover:scale-110 transition-transform"},[k(W(D),{icon:["fas","cart-shopping"],class:"text-2xl"}),h.value>0?(n(),o("span",O,i(h.value),1)):p("",!0)],512),v.value?(n(),o("div",P," Votre panier est vide ! ")):p("",!0),k(V,{name:"fade-slide"},{default:N(()=>[t.value?(n(),o("div",z,[u.value.length===0?(n(),o("div",J," Le panier est vide üòï ")):p("",!0),(n(!0),o(S,null,T(u.value,s=>(n(),o("div",{key:s.id,class:"flex items-center mb-2"},[e("img",{src:q(s.images?.[0]?.url_image),class:"w-12 h-12 object-cover rounded mr-2"},null,8,M),e("div",R,[e("p",U,i(s.title),1),e("p",Z,i(s.prix)+" FCFA x "+i(s.quantity),1),e("div",G,[e("button",{onClick:f=>C(s),type:"button","aria-label":"Diminuer la quantit√©",title:"Diminuer la quantit√©",class:"bg-gray-200 dark:bg-gray-700 rounded px-2 text-sm hover:bg-gray-300"},"-",8,H),e("span",K,i(s.quantity),1),e("button",{onClick:f=>w(s),type:"button","aria-label":"Augmenter la quantit√©",title:"Augmenter la quantit√©",class:"bg-gray-200 dark:bg-gray-700 rounded px-2 text-sm hover:bg-gray-300"},"+",8,Q)])])]))),128)),c[1]||(c[1]=e("hr",{class:"my-2 border-gray-300 dark:border-[var(--dark-grey)]"},null,-1)),e("div",X,[c[0]||(c[0]=e("span",{class:"text-[var(--dark-gold)]"},"Total :",-1)),e("span",Y,i(_.value)+" FCFA",1)]),e("button",{type:"button",title:"Regler la commande sur WhatsApp","aria-label":"Bouton regler la commande sur WhatsApp",onClick:F,disabled:u.value.length===0,class:"w-full bg-white dark:bg-[var(--dark-gold)] text-[var(--accent-cyan)] py-2 rounded hover:bg-gray-100 transition mt-3"}," Commander sur WhatsApp ",8,tt)])):p("",!0)]),_:1})]))}},rt=L(et,[["__scopeId","data-v-3319ad65"]]);export{rt as C,d as c};
