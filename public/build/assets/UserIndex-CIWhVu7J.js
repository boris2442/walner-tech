import{d as S,y as h,c as V,a as d,e as u,u as p,h as I,w as f,b as t,t as r,G as _,H as $,j as x,o as n,A,i as T,F as m,z as g,J as D,I as b}from"./app-CvgTuPAn.js";import{_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-DRL2Xeim.js";import{d as N}from"./dayjs.min-AeZQRq8z.js";import{T as j}from"./trash-2-BcStnNXG.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-B7rjenF_.js";import"./useForwardExpose-Cq_YTrM4.js";import"./VisuallyHidden-CnsOLLM7.js";import"./RovingFocusGroup-B71jWLgx.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BdvXPHPK.js";import"./createLucideIcon-CSeaxrzf.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-hywC6vGG.js";const Y={class:"flex flex-col gap-4 p-4 overflow-x-auto"},z={class:"grid gap-4 grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4"},B={class:"kpi-card"},H={class:"kpi-text"},R={class:"kpi-card"},F={class:"kpi-text"},G={class:"kpi-card"},J={class:"kpi-text"},O={class:"kpi-card"},q={class:"kpi-text"},K={class:"kpi-card"},P={class:"kpi-text"},Q={class:"relative rounded-xl border border-sidebar-border/70 dark:border-sidebar-border min-h-[50vh]"},W={class:"flex flex-col md:flex-row gap-2 md:gap-4 mb-4 p-2"},X={class:"relative"},Z={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border rounded shadow-lg z-50"},tt={class:"overflow-x-auto"},et={class:"w-full text-left border-collapse text-[0.75rem] sm:text-[0.75rem] md:text-[0.875rem] lg:text-[0.875rem]"},st={class:"p-2 truncate max-w-[150px]"},ot={class:"p-2"},rt={class:"p-2"},lt={class:"p-2"},at=["onUpdate:modelValue","onChange"],it=["value"],dt={class:"p-2"},nt={class:"p-2 flex gap-2"},ct=["onClick"],ut={key:0},pt=S({__name:"UserIndex",props:{stats:{},users:{},filters:{},roles:{}},setup(k){const l=k,w=[{title:"Users",href:"/admin/users"}],i=h(l.filters.search||""),v=V(()=>i.value?l.users.data.filter(s=>(s.name??"").toLowerCase().includes(i.value.toLowerCase())||(s.phone??"").toLowerCase().includes(i.value.toLowerCase())||(s.role??"").toLowerCase().includes(i.value.toLowerCase())||(s.email??"").toLowerCase().includes(i.value.toLowerCase())):l.users.data);function y(s){return N(s).format("DD/MM/YYYY HH:mm")}const c=h(!1);function C(s){s.target.closest(".relative")||(c.value=!1)}document.addEventListener("click",C);const U=s=>{confirm("Voulez-vous vraiment supprimer cette cat√©gorie ?")&&b.Inertia.delete(`/admin/users/${s}`,{onSuccess:()=>{console.log("Supprim√© avec succ√®s")},preserveScroll:!0})};function L(s,e){b.Inertia.put(`/admin/users/${s}/role`,{role:e},{preserveScroll:!0,onSuccess:()=>{console.log(`R√¥le de l'utilisateur ${s} mis √† jour : ${e}`)},onError:o=>{console.error(o)}})}return(s,e)=>(n(),d(m,null,[u(p(I),{title:"Users"}),u(E,{breadcrumbs:w},{default:f(()=>[t("div",Y,[t("div",z,[t("div",B,[e[3]||(e[3]=t("div",{class:"kpi-icon"},"üë•",-1)),t("div",H,[e[2]||(e[2]=t("h3",null,"Total Utilisateurs",-1)),t("p",null,r(l.stats.total),1)])]),t("div",R,[e[5]||(e[5]=t("div",{class:"kpi-icon"},"üÜï",-1)),t("div",F,[e[4]||(e[4]=t("h3",null,"Inscrits Aujourd'hui",-1)),t("p",null,r(l.stats.today),1)])]),t("div",G,[e[7]||(e[7]=t("div",{class:"kpi-icon"},"üõ°Ô∏è",-1)),t("div",J,[e[6]||(e[6]=t("h3",null,"Administrateurs",-1)),t("p",null,r(l.stats.admins),1)])]),t("div",O,[e[9]||(e[9]=t("div",{class:"kpi-icon"},"üë§",-1)),t("div",q,[e[8]||(e[8]=t("h3",null,"Utilisateurs",-1)),t("p",null,r(l.stats.clients),1)])]),t("div",K,[e[11]||(e[11]=t("div",{class:"kpi-icon"},"üë§",-1)),t("div",P,[e[10]||(e[10]=t("h3",null,"Inscrit cette semaine",-1)),t("p",null,r(l.stats.week),1)])])]),t("div",Q,[t("div",W,[_(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>i.value=o),placeholder:"Rechercher par nom ou contact ou email",class:"border p-2 rounded flex-1 text-xs sm:text-sm md:text-base"},null,512),[[$,i.value]]),t("div",X,[t("button",{onClick:e[1]||(e[1]=o=>c.value=!c.value),class:"p-2 border rounded hover:bg-gray-100 dark:hover:bg-gray-700"}," ‚ãÆ "),c.value?(n(),d("div",Z,[t("ul",null,[t("li",null,[u(p(A),{href:"/admin/users/create",class:"block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700"},{default:f(()=>[...e[12]||(e[12]=[T(" Cr√©er un utilisateur ",-1)])]),_:1})])])])):x("",!0)])]),t("div",tt,[t("table",et,[e[14]||(e[14]=t("thead",null,[t("tr",{class:"border-b"},[t("th",{class:"p-2"},"Nom"),t("th",{class:"p-2"},"Email"),t("th",{class:"p-2"},"T√©l√©phone"),t("th",{class:"p-2"},"R√¥le"),t("th",{class:"p-2"},"Cr√©√© le"),t("th",{class:"p-2"},"Actions")])],-1)),t("tbody",null,[(n(!0),d(m,null,g(v.value,o=>(n(),d("tr",{key:o.id,class:"border-b hover:bg-gray-100 dark:hover:bg-gray-700"},[t("td",st,r(o.name),1),t("td",ot,r(o.email),1),t("td",rt,r(o.phone),1),t("td",lt,[_(t("select",{"onUpdate:modelValue":a=>o.role=a,onChange:a=>L(o.id,a.target.value),class:"border rounded px-2 py-1 text-sm"},[(n(!0),d(m,null,g(l.roles,a=>(n(),d("option",{key:a,value:a},r(a),9,it))),128))],40,at),[[D,o.role]])]),t("td",dt,r(y(o.created_at)),1),t("td",nt,[t("button",{class:"text-red-500 hover:text-red-700",title:"Supprimer",onClick:a=>U(o.id)},[u(p(j),{class:"w-4 h-4 md:w-5 md:h-5"})],8,ct)])]))),128)),v.value.length===0?(n(),d("tr",ut,[...e[13]||(e[13]=[t("td",{colspan:"7",class:"text-center p-4 text-gray-500"}," Aucun utilisateur trouv√© ",-1)])])):x("",!0)])])])])])]),_:1})],64))}}),Lt=M(pt,[["__scopeId","data-v-c490347a"]]);export{Lt as default};
