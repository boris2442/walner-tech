import{d as y,E as V,y as h,a as l,e as d,u as r,h as w,w as C,b as s,v as P,g as u,o as i,t as n,H as U,F as p,z as f,K as A}from"./app-DLlnkGv3.js";import{p as g,_ as F}from"./AppLayout.vue_vue_type_script_setup_true_lang-DLGMsW9k.js";import{d as E}from"./index-BdvXPHPK.js";import{_ as c}from"./Input-B1CyMGZo.js";import{_ as S,a as $}from"./SubmitButton-C_zdgj2A.js";import{_ as D}from"./BackButton-CWYzHJN8.js";import"./index-C4o73Tv0.js";import"./useForwardExpose-BySXUGVq.js";import"./VisuallyHidden-FqXcH_PG.js";import"./RovingFocusGroup-B2YdnFD1.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./createLucideIcon-DmwDNL-b.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Cttgt27_.js";const L={class:"flex flex-col gap-4 p-4"},j={class:"relative min-h-[80vh] flex-1 rounded-xl border border-sidebar-border/70 dark:border-sidebar-border p-6"},B={key:0,class:"text-sm"},N={key:1,class:"text-sm"},M={key:2,class:"text-sm"},R=["value"],q={key:0,class:"text-red-500 text-sm mt-1"},z={class:"flex gap-2 mt-2 flex-wrap"},H=["src"],I={key:0,class:"text-red-500 text-sm mt-1"},oe=y({__name:"ProductCreate",props:{categories:Array},setup(b){const x=[{title:"dashboard",href:E().url},{title:"Products List",href:g.index().url},{title:"Products create",href:g.create().url}],e=V({title:"",description:"",prix:"",stock:0,category_id:"",status:"disponible",images:[]}),m=h([]),k=()=>{const a=new FormData;a.append("title",e.title),a.append("description",e.description),a.append("prix",e.prix),a.append("stock",e.stock),a.append("category_id",e.category_id),a.append("status",e.status),e.images.forEach(t=>a.append("images[]",t)),e.post("/admin/products/store",{onSuccess:()=>{e.reset(),m.value=[]},onError:t=>{}})},_=a=>{const t=a.target;t.files&&(e.images=Array.from(t.files),m.value=e.images.map(o=>URL.createObjectURL(o)))};return(a,t)=>(i(),l(p,null,[d(r(w),{title:"Créer un Produit"}),d(F,{breadcrumbs:x},{default:C(()=>[s("div",L,[d(D,{class:"m-4"}),s("div",j,[t[8]||(t[8]=s("h1",{class:"text-xl font-bold mb-4 text-[var(--primary-blue)] dark:text-[var(--dark-gold)]"}," Ajouter un Produit ",-1)),s("form",{onSubmit:P(k,["prevent"]),enctype:"multipart/form-data",class:"flex flex-col gap-4"},[d(c,{label:"Titre du produit",modelValue:r(e).title,"onUpdate:modelValue":t[0]||(t[0]=o=>r(e).title=o),error:r(e).errors.title},null,8,["modelValue","error"]),r(e).errors.title?(i(),l("span",B,n(r(e).errors.title),1)):u("",!0),d(S,{label:"Description",modelValue:r(e).description,"onUpdate:modelValue":t[1]||(t[1]=o=>r(e).description=o),error:r(e).errors.description},null,8,["modelValue","error"]),r(e).errors.description?(i(),l("span",N,n(r(e).errors.description),1)):u("",!0),d(c,{label:"Prix",modelValue:r(e).prix,"onUpdate:modelValue":t[2]||(t[2]=o=>r(e).prix=o),type:"number",error:r(e).errors.prix},null,8,["modelValue","error"]),d(c,{label:"Stock",modelValue:r(e).stock,"onUpdate:modelValue":t[3]||(t[3]=o=>r(e).stock=o),type:"number",error:r(e).errors.stock},null,8,["modelValue","error"]),r(e).errors.stock?(i(),l("span",M,n(r(e).errors.stock),1)):u("",!0),s("div",null,[t[6]||(t[6]=s("label",{class:"block mb-1 font-medium text-[var(--primary-blue)] dark:text-[var(--dark-gold)]"}," Catégorie ",-1)),U(s("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>r(e).category_id=o),required:"",class:"p-2 border rounded w-full focus:outline-none focus:ring-2 focus:ring-[var(--primary-blue)] dark:bg-[#2A2A2A] dark:border-gray-600 dark:focus:ring-[var(--dark-gold)]"},[t[5]||(t[5]=s("option",{value:"",disabled:"",class:"text-xs"},"Choisir une catégorie",-1)),(i(!0),l(p,null,f(b.categories,o=>(i(),l("option",{class:"text-xs",key:o.id,value:o.id},n(o.name),9,R))),128))],512),[[A,r(e).category_id]]),r(e).errors.category_id?(i(),l("p",q,n(r(e).errors.category_id),1)):u("",!0)]),s("div",null,[t[7]||(t[7]=s("label",{class:"block mb-1 font-medium text-[var(--primary-blue)] dark:text-[var(--dark-gold)]"},"Images",-1)),s("input",{type:"file",multiple:"",accept:"image/*",onChange:_,class:"block w-full"},null,32),s("div",z,[(i(!0),l(p,null,f(m.value,(o,v)=>(i(),l("img",{key:v,src:o,class:"h-20 w-20 object-cover rounded border"},null,8,H))),128))]),r(e).errors.images?(i(),l("span",I,n(r(e).errors.images),1)):u("",!0)]),d($,{processing:r(e).processing,label:"Enregistrer"},null,8,["processing"])],32)])])]),_:1})],64))}});export{oe as default};
