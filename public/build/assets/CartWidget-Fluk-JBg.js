import{a4 as F,y as f,c as x,B as I,a as o,b as e,g as h,e as _,u as $,P as B,t as l,w as A,o as i,F as S,z as T,U as j}from"./app-DTp7gRpJ.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const d=F({items:JSON.parse(localStorage.getItem("cart")||"[]"),save(){localStorage.setItem("cart",JSON.stringify(this.items))},add(s){const t=this.items.find(c=>c.id===s.id);t?t.quantity+=1:this.items.push({...s,quantity:1}),this.save()},increase(s){s.quantity++,this.save()},decrease(s){if(s.quantity>1)s.quantity--;else{const t=this.items.findIndex(c=>c.id===s.id);t!==-1&&this.items.splice(t,1)}this.save()},totalItems(){return this.items.reduce((s,t)=>s+t.quantity,0)},totalPrice(){return this.items.reduce((s,t)=>s+t.prix*t.quantity,0)}}),W={class:"fixed bottom-6 right-6 z-50 flex flex-col items-end"},E={key:0,class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs"},L={key:0,class:"absolute bottom-14 right-0 bg-red-500 text-white text-xs py-1 px-2 rounded shadow-lg"},P={key:0,class:"cart-widget absolute bottom-14 right-0 z-50 w-80 max-h-96 bg-[var(--accent-cyan)] dark:bg-dark-background shadow-lg rounded-lg overflow-y-auto p-3 cart-scroll mt-2"},V={key:0,class:"text-sm text-gray-400 dark:text-dark-grey text-center"},z=["src"],J={class:"flex-1"},O={class:"text-sm font-medium truncate text-gray-100"},U={class:"text-xs text-[var(--dark-gold)]"},M={class:"flex items-center mt-1 gap-1"},D=["onClick"],R={class:"px-2"},G=["onClick"],H={class:"flex justify-between font-semibold"},K={class:"text-[var(--dark-white)] underline"},Q=["disabled"],X={__name:"CartWidget",setup(s){const t=f(!1);function c(){t.value=!t.value}const u=x(()=>d.items),m=x(()=>d.totalItems()),p=x(()=>d.totalPrice());function y(r){d.increase(r)}function b(r){d.decrease(r)}function k(r){return r?`/${r}`:"/fallback.png"}function w(){const r="237656894773";let n=`Bonjour Walner Tech ðŸ‘‹,
Je souhaite passer la commande suivante :

`;u.forEach(a=>{n+=`â€¢ ${a.title} (x${a.quantity}) = ${a.prix*a.quantity} FCFA
`}),n+=`
Montant total : ${p.value} FCFA

Merci !`,window.open(`https://wa.me/${r}?text=${encodeURIComponent(n)}`,"_blank")}const g=f(null),v=f(!1);function C(){g.value&&(g.value.classList.add("animate-shake"),v.value=!0,setTimeout(()=>{g.value.classList.remove("animate-shake"),v.value=!1},800))}return I(m,r=>{r===0&&C()}),(r,n)=>(i(),o("div",W,[e("button",{onClick:c,ref_key:"cartButton",ref:g,class:"relative bg-[var(--primary-blue)] rounded-full w-12 h-12 flex items-center justify-center text-[var(--dark-gold)] shadow-lg hover:scale-110 transition-transform"},[_($(B),{icon:["fas","cart-shopping"],class:"text-2xl"}),m.value>0?(i(),o("span",E,l(m.value),1)):h("",!0)],512),v.value?(i(),o("div",L," Votre panier est vide ! ")):h("",!0),_(j,{name:"fade-slide"},{default:A(()=>[t.value?(i(),o("div",P,[u.value.length===0?(i(),o("div",V," Le panier est vide ðŸ˜• ")):h("",!0),(i(!0),o(S,null,T(u.value,a=>(i(),o("div",{key:a.id,class:"flex items-center mb-2"},[e("img",{src:k(a.images?.[0]?.url_image),class:"w-12 h-12 object-cover rounded mr-2"},null,8,z),e("div",J,[e("p",O,l(a.title),1),e("p",U,l(a.prix)+" FCFA x "+l(a.quantity),1),e("div",M,[e("button",{onClick:q=>b(a),class:"bg-gray-200 dark:bg-gray-700 rounded px-2 text-sm hover:bg-gray-300"},"-",8,D),e("span",R,l(a.quantity),1),e("button",{onClick:q=>y(a),class:"bg-gray-200 dark:bg-gray-700 rounded px-2 text-sm hover:bg-gray-300"},"+",8,G)])])]))),128)),n[1]||(n[1]=e("hr",{class:"my-2 border-gray-300 dark:border-[var(--dark-grey)]"},null,-1)),e("div",H,[n[0]||(n[0]=e("span",{class:"text-[var(--dark-gold)]"},"Total :",-1)),e("span",K,l(p.value)+" FCFA",1)]),e("button",{onClick:w,disabled:u.value.length===0,class:"w-full bg-white dark:bg-[var(--dark-gold)] text-[var(--accent-cyan)] py-2 rounded hover:bg-gray-100 transition mt-3"}," Commander sur WhatsApp ",8,Q)])):h("",!0)]),_:1})]))}},tt=N(X,[["__scopeId","data-v-c09a2d48"]]);export{tt as C,d as c};
