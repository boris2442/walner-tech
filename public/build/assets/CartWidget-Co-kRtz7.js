import{H as B,a7 as N,y,c as b,B as S,a as o,b as t,g as p,e as _,u as w,O as T,t as l,w as W,o as i,F as j,z as D,j as L,X as V,D as z,P as M}from"./app-BmZ0XcVn.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=B("MessageCircleIcon",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),u=N({items:JSON.parse(localStorage.getItem("cart")||"[]"),save(){localStorage.setItem("cart",JSON.stringify(this.items))},add(a){const e=this.items.find(c=>c.id===a.id);e?e.quantity+=1:this.items.push({...a,quantity:1}),this.save()},increase(a){a.quantity++,this.save()},decrease(a){if(a.quantity>1)a.quantity--;else{const e=this.items.findIndex(c=>c.id===a.id);e!==-1&&this.items.splice(e,1)}this.save()},totalItems(){return this.items.reduce((a,e)=>a+e.quantity,0)},totalPrice(){return this.items.reduce((a,e)=>a+e.prix*e.quantity,0)}}),E={class:"fixed right-6 bottom-6 z-50 flex flex-col items-end"},J={key:0,class:"absolute -top-2 -right-2 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs text-white"},R={key:0,class:"absolute right-0 bottom-14 rounded bg-red-500 px-2 py-1 text-xs text-white shadow-lg"},U={key:0,class:"cart-widget dark:bg-dark-background cart-scroll absolute right-0 bottom-14 z-50 mt-2 max-h-96 w-80 overflow-y-auto rounded-lg bg-[var(--accent-cyan)] p-3 shadow-lg"},Z={key:0,class:"dark:text-dark-grey text-center text-sm text-gray-400"},H=["src"],X={class:"flex-1"},G={class:"truncate text-sm font-medium text-gray-100"},K={class:"text-xs text-[var(--dark-gold)]"},Q={class:"mt-1 flex items-center gap-1"},Y=["onClick"],ee={class:"px-2"},te=["onClick"],ae={class:"flex justify-between font-semibold"},se={class:"text-[var(--dark-white)] underline"},re=["disabled"],ne={__name:"CartWidget",setup(a){const e=y(!1);function c(){e.value=!e.value}const d=b(()=>u.items),h=b(()=>u.totalItems()),k=b(()=>u.totalPrice());function C(r){u.increase(r)}function q(r){u.decrease(r)}function A(r){return r?`/${r}`:"/fallback.png"}function F(){const n=z().props.auth?.user,s=n?.name||"Client Walner Tech";if(!n){confirm(`‚ö†Ô∏è Vous devez √™tre connect√© pour pouvoir effectuer une commande.
Souhaitez-vous vous connecter maintenant ?`)&&M.visit("/login");return}const f="237657961059";let x=`*Bonjour √©quipe Walner Tech üëã,*
Je souhaite confirmer ma commande. Voici le r√©capitulatif :

`;d.value.forEach(g=>{x+=`‚Ä¢ ${g.title} (x${g.quantity}) ‚Äî ${g.prix*g.quantity} FCFA
`});const $=new Date().toLocaleString("fr-FR",{timeZone:"Africa/Douala"});x+=`
*Montant total :* ${k.value} FCFA
üïí *Date de commande :* ${$}

Merci de bien vouloir me confirmer la disponibilit√© et les modalit√©s de livraison.

üë§ *Nom du client :* ${s}

Cordialement,
${s}
`,window.open(`https://wa.me/${f}?text=${encodeURIComponent(x)}`,"_blank")}const m=y(null),v=y(!1);function I(){m.value&&(m.value.classList.add("animate-shake"),v.value=!0,setTimeout(()=>{m.value.classList.remove("animate-shake"),v.value=!1},800))}return S(h,r=>{r===0&&I()}),(r,n)=>(i(),o("div",E,[t("button",{onClick:c,type:"button",title:"Ouvrir le panier","aria-label":"Bouton ouvrir le panier",ref_key:"cartButton",ref:m,class:"animate-cart relative flex h-12 w-12 items-center justify-center rounded-full bg-[var(--primary-blue)] text-[var(--dark-gold)] shadow-lg transition-transform hover:scale-110"},[_(w(T),{icon:["fas","cart-shopping"],class:"animate-spin-slow text-2xl"}),h.value>0?(i(),o("span",J,l(h.value),1)):p("",!0)],512),v.value?(i(),o("div",R," Votre panier est vide ! ")):p("",!0),_(V,{name:"fade-slide"},{default:W(()=>[e.value?(i(),o("div",U,[d.value.length===0?(i(),o("div",Z,"Le panier est vide üòï")):p("",!0),(i(!0),o(j,null,D(d.value,s=>(i(),o("div",{key:s.id,class:"mb-2 flex items-center"},[t("img",{src:A(s.images?.[0]?.url_image),class:"mr-2 h-12 w-12 rounded object-cover"},null,8,H),t("div",X,[t("p",G,l(s.title),1),t("p",K,l(s.prix)+" FCFA x "+l(s.quantity),1),t("div",Q,[t("button",{onClick:f=>q(s),type:"button","aria-label":"Diminuer la quantit√©",title:"Diminuer la quantit√©",class:"rounded bg-gray-200 px-2 text-sm hover:bg-gray-300 dark:bg-gray-700"}," - ",8,Y),t("span",ee,l(s.quantity),1),t("button",{onClick:f=>C(s),type:"button","aria-label":"Augmenter la quantit√©",title:"Augmenter la quantit√©",class:"rounded bg-gray-200 px-2 text-sm hover:bg-gray-300 dark:bg-gray-700"}," + ",8,te)])])]))),128)),n[2]||(n[2]=t("hr",{class:"my-2 border-gray-300 dark:border-[var(--dark-grey)]"},null,-1)),t("div",ae,[n[0]||(n[0]=t("span",{class:"text-[var(--dark-gold)]"},"Total :",-1)),t("span",se,l(k.value)+" FCFA",1)]),t("button",{type:"button",title:"R√©gler la commande sur WhatsApp","aria-label":"Bouton r√©gler la commande sur WhatsApp",onClick:F,disabled:d.value.length===0,class:"mt-3 flex w-full items-center justify-center gap-2 rounded bg-white py-2 text-[var(--accent-cyan)] shadow-md transition hover:scale-[1.02] active:scale-95 dark:bg-[var(--dark-gold)]"},[_(w(P),{class:"animate-pulse-glow h-5 w-5"}),n[1]||(n[1]=L(" Commander sur WhatsApp ",-1))],8,re)])):p("",!0)]),_:1})]))}},le=O(ne,[["__scopeId","data-v-ac23cc00"]]);export{le as C,u as c};
