import{_ as V}from"./BackButton-CR_QHf0H.js";import{F as I}from"./FlashMessageFrontend-DjEh6ngf.js";import{_ as E}from"./AppLayout.vue_vue_type_script_setup_true_lang-BBeBFaYy.js";import{d as K}from"./index-BdvXPHPK.js";import{d as A,s as N,h as S,v as U,r as B,o as Q,a as z,w as G,t as L,n as H,i as R,c as g,b as _,u as p,e as J,f as W,g as X,j as F,k as t,l as f,m as u,F as C,p as Y,q as Z}from"./app-3lHVxEks.js";import{C as M,B as tt,p as et,a as st,b as at,c as ot,d as rt,L as nt}from"./chart-DA-3lDA_.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BOBlRyUm.js";import"./useForwardExpose-mAhlf5jh.js";import"./VisuallyHidden-CMpbcgZZ.js";import"./RovingFocusGroup-BIqvpQk4.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BjxJdSJA.js";const $={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},lt={ariaLabel:{type:String},ariaDescribedby:{type:String}},it={type:{type:String,required:!0},destroyDelay:{type:Number,default:0},...$,...lt},dt=U[0]==="2"?(e,a)=>Object.assign(e,{attrs:a}):(e,a)=>Object.assign(e,a);function y(e){return R(e)?L(e):e}function ct(e){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e;return R(a)?new Proxy(e,{}):e}function ut(e,a){const o=e.options;o&&a&&Object.assign(o,a)}function q(e,a){e.labels=a}function T(e,a,o){const d=[];e.datasets=a.map(l=>{const r=e.datasets.find(c=>c[o]===l[o]);return!r||!l.data||d.includes(r)?{...l}:(d.push(r),Object.assign(r,l),r)})}function pt(e,a){const o={labels:[],datasets:[]};return q(o,e.labels),T(o,e.datasets,a),o}const mt=A({props:it,setup(e,a){let{expose:o,slots:d}=a;const l=B(null),r=N(null);o({chart:r});const c=()=>{if(!l.value)return;const{type:n,data:s,options:i,plugins:x,datasetIdKey:P}=e,v=pt(s,P),m=ct(v,s);r.value=new M(l.value,{type:n,data:m,options:{...i},plugins:x})},h=()=>{const n=L(r.value);n&&(e.destroyDelay>0?setTimeout(()=>{n.destroy(),r.value=null},e.destroyDelay):(n.destroy(),r.value=null))},D=n=>{n.update(e.updateMode)};return Q(c),z(h),G([()=>e.options,()=>e.data],(n,s)=>{let[i,x]=n,[P,v]=s;const m=L(r.value);if(!m)return;let k=!1;if(i){const b=y(i),O=y(P);b&&b!==O&&(ut(m,b),k=!0)}if(x){const b=y(x.labels),O=y(v.labels),w=y(x.datasets),j=y(v.datasets);b!==O&&(q(m.config.data,b),k=!0),w&&w!==j&&(T(m.config.data,w,e.datasetIdKey),k=!0)}k&&H(()=>{D(m)})},{deep:!0}),()=>S("canvas",{role:"img",ariaLabel:e.ariaLabel,ariaDescribedby:e.ariaDescribedby,ref:l},[S("p",{},[d.default?d.default():""])])}});function ft(e,a){return M.register(a),A({props:$,setup(o,d){let{expose:l}=d;const r=N(null),c=h=>{r.value=h?.chart};return l({chart:r}),()=>S(mt,dt({ref:c},{type:e,...o}))}})}const bt=ft("bar",tt),gt={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},yt={class:"grid grid-cols-2 gap-4 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4"},ht={class:"kpi-card"},xt={class:"kpi-text"},vt={class:"kpi-card"},kt={class:"kpi-text"},_t={class:"kpi-card"},Dt={class:"kpi-text"},Pt={class:"kpi-card"},Ot={class:"kpi-text"},wt={class:"text-xs"},Ct={key:0,class:"text-xs"},St={class:"relative min-h-[100vh] flex-1 rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border"},Bt={class:"h-72 rounded-xl bg-white p-6 shadow-lg dark:bg-gray-800"},Lt={class:"rounded-xl bg-white p-6 shadow-lg dark:bg-gray-800"},At={class:"w-full text-left text-sm"},Mt={class:"py-2"},Ft={class:"font-semibold text-green-600"},Nt={key:0,class:"text-sm text-gray-400 italic"},Ht=A({__name:"Dashboard",props:{totalOrders:Number,totalProducts:Number,totalSpent:Number,lastOrder:Object,ordersByMonth:Array,orders:Array},setup(e){const a=[{title:"Dashboard",href:K().url}],o=e,d=o.totalOrders||0,l=o.totalProducts||0,r=o.totalSpent||0,c=o.lastOrder||null;M.register(et,st,at,ot,rt,nt);const h=B({labels:o.ordersByMonth.map(n=>`Mois ${n.month}`),datasets:[{label:"Commandes par mois",data:o.ordersByMonth.map(n=>n.total)}]}),D=B({responsive:!0,maintainAspectRatio:!1});return(n,s)=>(f(),g(C,null,[_(p(J),{title:"Dashboard"}),_(E,{breadcrumbs:a},{default:W(()=>[n.$page.props.flash?.message?(f(),X(I,{key:0,message:n.$page.props.flash.message,link:n.$page.props.flash.link},null,8,["message","link"])):F("",!0),t("div",gt,[_(V,{class:"m-4"}),t("div",yt,[t("div",ht,[s[1]||(s[1]=t("div",{class:"kpi-icon"},"ðŸ†•",-1)),t("div",xt,[s[0]||(s[0]=t("h3",{class:"text-2xl"},"Total commandes",-1)),t("p",null,u(p(d)),1)])]),t("div",vt,[s[3]||(s[3]=t("div",{class:"kpi-icon"},"ðŸ†•",-1)),t("div",kt,[s[2]||(s[2]=t("h3",{class:"text-2xl"},"Produits commandÃ©",-1)),t("p",null,u(p(l)),1)])]),t("div",_t,[s[5]||(s[5]=t("div",{class:"kpi-icon"},"ðŸ†•",-1)),t("div",Dt,[s[4]||(s[4]=t("h3",{class:"text-2xl"},"Montant dÃ©pensÃ©",-1)),t("p",null,u(p(r))+" F",1)])]),t("div",Pt,[s[7]||(s[7]=t("div",{class:"kpi-icon"},"ðŸ†•",-1)),t("div",Ot,[s[6]||(s[6]=t("h3",{class:"text-2xl"},"DerniÃ¨re commande",-1)),t("p",wt,[t("i",null,[p(c)?(f(),g("span",Ct,u(p(c).quantity)+" produits le "+u(new Date(p(c).created_at).toLocaleDateString()),1)):(f(),g(C,{key:1},[Y(" Aucune commande ")],64))])])])])]),t("div",St,[t("div",Bt,[s[8]||(s[8]=t("h2",{class:"mb-3 text-xl font-bold"},"ActivitÃ© des commandes",-1)),_(p(bt),{data:h.value,options:D.value},null,8,["data","options"])]),t("div",Lt,[s[10]||(s[10]=t("h2",{class:"mb-4 text-xl font-bold"},"DerniÃ¨res commandes",-1)),t("table",At,[s[9]||(s[9]=t("thead",{class:"border-b text-gray-500"},[t("tr",null,[t("th",{class:"pb-2"},"Produit"),t("th",{class:"pb-2"},"QuantitÃ©"),t("th",{class:"pb-2"},"Prix"),t("th",{class:"pb-2"},"Date")])],-1)),t("tbody",null,[(f(!0),g(C,null,Z(e.orders,i=>(f(),g("tr",{key:i.id,class:"border-b hover:bg-gray-100 dark:hover:bg-gray-700"},[t("td",Mt,u(i.product?.title??"Produit inconnu"),1),t("td",null,u(i.quantity),1),t("td",Ft,u(i.prix)+" FCFA",1),t("td",null,u(new Date(i.created_at).toLocaleDateString()),1)]))),128))])]),e.orders.length===0?(f(),g("p",Nt,"Aucune commande pour le moment.")):F("",!0)])])])]),_:1})],64))}});export{Ht as default};
