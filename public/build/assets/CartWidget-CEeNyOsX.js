import{M as B,ab as T,r as y,B as b,w as N,c as i,k as t,j as g,b as _,u as w,T as W,m as c,f as j,l,F as L,q as V,p as D,a0 as M,K as z,U as C}from"./app-B8Bday2e.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=B("MessageCircleIcon",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),m=T({items:JSON.parse(localStorage.getItem("cart")||"[]"),save(){localStorage.setItem("cart",JSON.stringify(this.items))},add(a){const e=this.items.find(u=>u.id===a.id);e?e.quantity+=1:this.items.push({...a,quantity:1}),this.save()},increase(a){a.quantity++,this.save()},decrease(a){if(a.quantity>1)a.quantity--;else{const e=this.items.findIndex(u=>u.id===a.id);e!==-1&&this.items.splice(e,1)}this.save()},totalItems(){return this.items.reduce((a,e)=>a+e.quantity,0)},totalPrice(){return this.items.reduce((a,e)=>a+e.prix*e.quantity,0)}}),P={class:"fixed right-6 bottom-6 z-50 flex flex-col items-end"},J={key:0,class:"absolute -top-2 -right-2 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs text-white"},R={key:0,class:"absolute right-0 bottom-14 rounded bg-red-500 px-2 py-1 text-xs text-white shadow-lg"},U={key:0,class:"cart-widget dark:bg-dark-background cart-scroll absolute right-0 bottom-14 z-50 mt-2 max-h-96 w-80 overflow-y-auto rounded-lg bg-[var(--accent-cyan)] p-3 shadow-lg"},Z={key:0,class:"dark:text-dark-grey text-center text-sm text-gray-400"},K=["src"],G={class:"flex-1"},H={class:"truncate text-sm font-medium text-gray-100"},Q={class:"text-xs text-[var(--dark-gold)]"},X={class:"mt-1 flex items-center gap-1"},Y=["onClick"],ee={class:"px-2"},te=["onClick"],ae={class:"flex justify-between font-semibold"},se={class:"text-[var(--dark-white)] underline"},re=["disabled"],ne={__name:"CartWidget",setup(a){const e=y(!1);function u(){e.value=!e.value}const d=b(()=>m.items),v=b(()=>m.totalItems()),k=b(()=>m.totalPrice());function q(r){m.increase(r)}function A(r){m.decrease(r)}function F(r){return r?`/${r}`:"/fallback.png"}async function I(){const n=z().props.auth?.user,s=n?.name||"Client Walner Tech";if(!n){confirm(`‚ö†Ô∏è Vous devez √™tre connect√© pour pouvoir effectuer une commande.
Souhaitez-vous vous connecter maintenant ?`)&&C.visit("/login");return}await C.post("/order-click",{items:d.value.map(o=>({product_id:o.id,quantity:o.quantity,prix:o.prix}))},{preserveScroll:!0,preserveState:!0});const f="237657961059";let x=`*Bonjour √©quipe Walner Tech üëã,*
Je souhaite confirmer ma commande. Voici le r√©capitulatif :

`;d.value.forEach(o=>{x+=`‚Ä¢ ${o.title} (x${o.quantity}) ‚Äî ${o.prix*o.quantity} FCFA
`});const S=new Date().toLocaleString("fr-FR",{timeZone:"Africa/Douala"});x+=`
*Montant total :* ${k.value} FCFA
üïí *Date de commande :* ${S}

Merci de bien vouloir me confirmer la disponibilit√© et les modalit√©s de livraison.

üë§ *Nom du client :* ${s}

Cordialement,
${s}
`,window.open(`https://wa.me/${f}?text=${encodeURIComponent(x)}`,"_blank")}const p=y(null),h=y(!1);function $(){p.value&&(p.value.classList.add("animate-shake"),h.value=!0,setTimeout(()=>{p.value.classList.remove("animate-shake"),h.value=!1},800))}return N(v,r=>{r===0&&$()}),(r,n)=>(l(),i("div",P,[t("button",{onClick:u,type:"button",title:"Ouvrir le panier","aria-label":"Bouton ouvrir le panier",ref_key:"cartButton",ref:p,class:"animate-cart relative flex h-12 w-12 items-center justify-center rounded-full bg-[var(--primary-blue)] text-[var(--dark-gold)] shadow-lg transition-transform hover:scale-110"},[_(w(W),{icon:["fas","cart-shopping"],class:"animate-spin-slow text-2xl"}),v.value>0?(l(),i("span",J,c(v.value),1)):g("",!0)],512),h.value?(l(),i("div",R," Votre panier est vide ! ")):g("",!0),_(M,{name:"fade-slide"},{default:j(()=>[e.value?(l(),i("div",U,[d.value.length===0?(l(),i("div",Z,"Le panier est vide üòï")):g("",!0),(l(!0),i(L,null,V(d.value,s=>(l(),i("div",{key:s.id,class:"mb-2 flex items-center"},[t("img",{src:F(s.images?.[0]?.url_image),class:"mr-2 h-12 w-12 rounded object-cover"},null,8,K),t("div",G,[t("p",H,c(s.title),1),t("p",Q,c(s.prix)+" FCFA x "+c(s.quantity),1),t("div",X,[t("button",{onClick:f=>A(s),type:"button","aria-label":"Diminuer la quantit√©",title:"Diminuer la quantit√©",class:"rounded bg-gray-200 px-2 text-sm hover:bg-gray-300 dark:bg-gray-700"}," - ",8,Y),t("span",ee,c(s.quantity),1),t("button",{onClick:f=>q(s),type:"button","aria-label":"Augmenter la quantit√©",title:"Augmenter la quantit√©",class:"rounded bg-gray-200 px-2 text-sm hover:bg-gray-300 dark:bg-gray-700"}," + ",8,te)])])]))),128)),n[2]||(n[2]=t("hr",{class:"my-2 border-gray-300 dark:border-[var(--dark-grey)]"},null,-1)),t("div",ae,[n[0]||(n[0]=t("span",{class:"text-[var(--dark-gold)]"},"Total :",-1)),t("span",se,c(k.value)+" FCFA",1)]),t("button",{type:"button",title:"R√©gler la commande sur WhatsApp","aria-label":"Bouton r√©gler la commande sur WhatsApp",onClick:I,disabled:d.value.length===0,class:"mt-3 flex w-full items-center justify-center gap-2 rounded bg-white py-2 text-[var(--accent-cyan)] shadow-md transition hover:scale-[1.02] active:scale-95 dark:bg-[var(--dark-gold)]"},[_(w(O),{class:"animate-pulse-glow h-5 w-5"}),n[1]||(n[1]=D(" Commander sur WhatsApp ",-1))],8,re)])):g("",!0)]),_:1})]))}},le=E(ne,[["__scopeId","data-v-325fe0e0"]]);export{le as C,m as c};
