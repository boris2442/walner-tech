import{L as E,M as H,N as q,y as c,c as j,l as D,a as n,e as s,f as v,g as x,b as a,u as l,G as U,H as G,O as V,K as h,F as m,z as w,t as _,P as J,w as b,o,Q as K,R as Q}from"./app-Hj1NgxB5.js";import{d as I}from"./index-Gqex5yd2.js";import{C as B,c as X}from"./CartWidget-DpX02j4m.js";import{T as Y,N as Z,_ as ee}from"./Footer-bUkArV8f.js";import{F as te}from"./FlashMessageFrontend-71ujhVwt.js";import{L as ae,S as re,A as se,a as oe,b as ne,_ as le}from"./Loading-DGkCUijA.js";import{F as ie}from"./FloatingAction-BxRwFOmM.js";import{L as de}from"./LoginReminder-CvOw63UN.js";import{P as ce,M as ue,_ as fe,a as me}from"./HeroSection-B1dGZEIx.js";import{_ as ge}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BdvXPHPK.js";import"./createLucideIcon-D8VjZrcV.js";const ve={class:"dark:bg-dark-background dark:text-dark-white bg-background-light text-text-dark p-8 transition-colors duration-300"},he={class:"relative w-full max-w-md mx-auto"},pe={class:"flex gap-3 justify-start mb-4 overflow-x-auto whitespace-nowrap px-2"},ke=["onClick"],ye={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"},xe={class:"overflow-hidden rounded"},we=["src","alt"],_e=["src","alt"],be={class:"p-3 flex flex-col flex-1"},Ce={class:"text-sm font-medium truncate mt-2"},Se={class:"mt-auto flex justify-between items-center p-3"},$e=["onClick"],Ve=["onClick"],Ie={class:"ml-1 text-sm dark:text-[var(--dark-grey)]"},Le={key:0,class:"text-center mt-6 text-gray-500 dark:text-dark-grey"},Fe=["src"],ze={__name:"ProductIndex",props:{products:Array,categories:Array,filters:Object,auth:Object,seo:Object},setup(C){E.add(H,q);const g=C,S=c(g.filters.search||""),p=c(g.filters.category||""),$=c(!1),u=c(!0),k=c(!0),A=c([]),M=j(()=>window.innerWidth>=1024?20:window.innerWidth>=768?12:window.innerWidth>=640?8:4),d=c({show:!1,src:"",x:0,y:0,dx:0,dy:0});D(()=>{const t=localStorage.getItem("cart");t&&(A.value=JSON.parse(t)),$.value=localStorage.getItem("darkMode")==="true",sessionStorage.getItem("hasVisited")?(k.value=!1,u.value=!0,setTimeout(()=>{u.value=!1},1e3)):(k.value=!0,u.value=!0,setTimeout(()=>{k.value=!1,setTimeout(()=>{u.value=!1},1e3)},2e3),sessionStorage.setItem("hasVisited","true"))});const L=j(()=>g.products.filter(t=>{const r=t.title.toLowerCase().includes(S.value.toLowerCase()),e=p.value===""||t.category_id===p.value;return r&&e}));function N(t){if(!g.auth?.user){confirm(`Vous devez être connecté pour aimer un produit.
Voulez-vous vous connecter maintenant ?`)&&(window.location.href="/login");return}Q.post(`/like/${t.id}`).then(r=>{t.liked=r.data.liked,t.likes_count=r.data.likesCount}).catch(()=>{})}function F(t){return["border-none",p.value===t?"underline text-[var(--accent-cyan)]":"text-text-dark hover:text-[var(--accent-cyan)]"]}function z(t){p.value=t}function R(){}function P(t,r){if(!g.auth?.user){confirm(`Vous devez être connecté pour ajouter un produit au panier.
Voulez-vous vous connecter maintenant ?`)&&(window.location.href="/login");return}const e=t.currentTarget.closest(".product-card").querySelector("img"),i=document.querySelector(".fixed.bottom-6.right-6 button");if(!e||!i)return;const f=e.getBoundingClientRect(),y=i.getBoundingClientRect(),O=y.left+y.width/2-(f.left+f.width/2),W=y.top+y.height/2-(f.top+f.height/2);d.value={show:!0,src:e.src,x:f.left,y:f.top,dx:O,dy:W},X.add(r),setTimeout(()=>{d.value.show=!1},800)}function T(t){return t?`/${t}`:"/fallback.png"}return(t,r)=>(o(),n(m,null,[s(l(I.Head),{title:C.seo.title},null,8,["title"]),k.value?(o(),v(ae,{key:0})):x("",!0),s(Y),s(Z,{auth:t.$page.props.auth,class:"mt-10 md:mt-12"},null,8,["auth"]),t.$page.props.flash?.message?(o(),v(te,{key:1,message:t.$page.props.flash.message,link:t.$page.props.flash.link},null,8,["message","link"])):x("",!0),s(ie),a("section",null,[a("div",ve,[a("div",he,[U(a("input",{"onUpdate:modelValue":r[0]||(r[0]=e=>S.value=e),onInput:R,type:"text",placeholder:"Rechercher un produit...",class:"w-full pl-10 pr-4 py-2 rounded-2xl border border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 shadow-sm hover:shadow-md"},null,544),[[G,S.value]]),s(l(V),{icon:"magnifying-glass",class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500"})]),a("div",pe,[a("span",{onClick:r[1]||(r[1]=e=>z("")),class:h([F(""),"inline-block cursor-pointer px-4 py-2 text-sm font-medium transition-colors duration-300 dark:text-[var(--dark-grey)]"])},"Tous",2),(o(!0),n(m,null,w(C.categories,e=>(o(),n("span",{key:e.id,onClick:i=>z(e.id),class:h([F(e.id),"inline-block cursor-pointer px-4 py-2 text-sm font-medium transition-colors duration-300 text-[var(--dark-blue)] dark:text-[var(--dark-grey)]"])},_(e.name),11,ke))),128))]),r[3]||(r[3]=a("hr",{class:"border-t border-gray-300 dark:border-[var(--dark-grey)] mb-6"},null,-1)),a("div",ye,[u.value?(o(!0),n(m,{key:0},w(M.value,e=>(o(),n("div",{key:e,class:"product-card rounded flex flex-col shadow-md overflow-hidden"},[...r[2]||(r[2]=[J('<div class="h-40 w-full rounded mb-3 skeleton" data-v-45c50805></div><div class="p-3 flex flex-col flex-1" data-v-45c50805><div class="h-4 rounded w-3/4 mb-2 skeleton" data-v-45c50805></div><div class="h-3 rounded w-1/2 skeleton" data-v-45c50805></div></div><div class="mt-auto flex justify-between items-center p-3" data-v-45c50805><div class="h-6 w-6 rounded-full skeleton" data-v-45c50805></div><div class="h-6 w-6 rounded-full skeleton" data-v-45c50805></div></div>',3)])]))),128)):(o(),n(m,{key:1},[(o(!0),n(m,null,w(L.value,e=>(o(),n("div",{key:e.id,class:h(["product-card rounded flex flex-col transition-transform duration-300 hover:scale-105",$.value?"bg-[var(--dark-background)] shadow-md border border-[var(--dark-grey)]":"bg-background-light shadow-md"])},[a("div",xe,[e.images.length>1?(o(),v(l(oe),{key:0,modules:[l(se),l(ce)],autoplay:{delay:3e3},pagination:"",loop:""},{default:b(()=>[(o(!0),n(m,null,w(e.images,i=>(o(),v(l(re),{key:i.id},{default:b(()=>[s(l(I.Link),{href:`/products/${e.slug}`,prefetch:"intent",class:"hover:underline"},{default:b(()=>[a("img",{src:T(i.url_image),alt:e.title,loading:"lazy",class:"w-full h-40 object-cover transition-transform duration-300 hover:scale-110 rounded"},null,8,we)]),_:2},1032,["href"])]),_:2},1024))),128))]),_:2},1032,["modules"])):(o(),v(l(I.Link),{key:1,href:`/products/${e.slug}`,prefetch:"intent",class:"hover:underline"},{default:b(()=>[a("img",{src:T(e.images[0]?.url_image),alt:e.title,loading:"lazy",class:"w-full h-40 object-cover transition-transform duration-300 hover:scale-110 rounded"},null,8,_e)]),_:2},1032,["href"]))]),a("div",be,[a("h3",Ce,_(e.title),1),a("p",{class:h(["text-sm font-semibold mt-2",$.value?"text-dark-white":"text-text-dark"])},_(e.prix)+" FCFA",3)]),a("div",Se,[a("button",{onClick:i=>P(i,e),class:"transition-transform duration-200 hover:scale-125 active:scale-90 text-[var(--accent-cyan)] dark:text-white"},[s(l(V),{icon:["fas","cart-shopping"]})],8,$e),a("button",{onClick:i=>N(e),class:h(["transition-transform duration-200 hover:scale-125 active:scale-90",e.liked?"text-red-500":"text-[var(--accent-cyan)]"])},[s(l(V),{icon:["far","heart"]}),a("span",Ie,_(e.likes_count),1)],10,Ve)])],2))),128)),s(B)],64))]),!u.value&&L.value.length===0?(o(),n("div",Le," Aucun produit trouvé ")):x("",!0),s(B)])]),s(ue),s(fe),s(ne),s(me),s(le),s(de),s(ee),d.value.show?(o(),n("img",{key:2,src:d.value.src,style:K({top:d.value.y+"px",left:d.value.x+"px",transform:"translate("+d.value.dx+"px,"+d.value.dy+"px) scale(0.2)",transition:"transform 0.8s ease-in-out, opacity 0.8s ease-in-out",opacity:1}),class:"fixed w-20 h-20 rounded-lg pointer-events-none z-50"},null,12,Fe)):x("",!0)],64))}},qe=ge(ze,[["__scopeId","data-v-45c50805"]]);export{qe as default};
