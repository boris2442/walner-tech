import{d as F,y as d,c as T,l as L,p as U,a,e as c,u as g,h as X,w as k,b as l,t as r,o,F as f,z as w,G as C,H as B,J as H,j as q,v as D,A as I,i as G,I as W}from"./app-U3Rqh_OU.js";import{p as J,_ as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-BC4xzacD.js";import{c as M}from"./createLucideIcon-DRArGXoQ.js";import"./index-DEWkqHgf.js";import"./useForwardExpose-CFC57vKZ.js";import"./VisuallyHidden-jby1fDDx.js";import"./RovingFocusGroup-k0sNm8hD.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BdvXPHPK.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BoM_YXjg.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=M("SquarePenIcon",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=M("TrashIcon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),Q={class:"flex flex-col gap-4 p-4"},Y={class:"grid gap-4 grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4"},Z={class:"kpi-card"},ee={class:"kpi-card"},te={class:"flex flex-wrap gap-4 mb-4 p-2 items-center"},se=["value"],le={class:"relative global-menu"},ae={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border rounded shadow-lg z-50"},oe={class:"grid gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5"},re=["onTouchstart","onTouchmove","onTouchend"],ne=["src","alt"],ie={key:1,class:"w-full h-full bg-gray-200 flex items-center justify-center rounded"},ue={class:"absolute bottom-2 right-2 flex gap-2 z-50"},de=["onClick"],ce={class:"flex-1 flex flex-col justify-between mt-2 px-2 pb-2"},ge={class:"font-bold truncate"},he={class:"text-sm text-gray-600 dark:text-gray-300"},ve={class:"font-semibold"},Ce=F({__name:"Index",props:{products:{},stats:{},filters:{},categories:{}},setup(V){const n=V,h=d(n.filters.search||""),v=d(n.filters.category||""),b=d(!1);function E(e){return e?`/storage/${e}`:"/fallback.png"}const P=T(()=>n.products.data.map(e=>({...e,images:e.images.length?e.images.map(t=>({path:t.url_image})):[]}))),m=T(()=>{let e=P.value;return h.value&&(e=e.filter(t=>t.title.toLowerCase().includes(h.value.toLowerCase()))),v.value&&(e=e.filter(t=>t.category?.id==v.value)),e}),S=e=>{confirm("Voulez-vous vraiment supprimer ce produit ?")&&W.Inertia.delete(`/admin/products/${e}`,{preserveScroll:!0})},i=d({});let x=null;L(()=>{x=setInterval(()=>{m.value.forEach(e=>{e.images.length>1&&(i.value[e.id]=((i.value[e.id]||0)+1)%e.images.length)})},3e3)}),U(()=>{x&&clearInterval(x)});const y=d({}),_=d({});function j(e,t){y.value[t]=e.touches[0].clientX}function z(e,t){_.value[t]=e.touches[0].clientX}function N(e){const t=y.value[e],s=_.value[e];if(t!=null&&s!=null){const u=t-s;if(u>50)i.value[e]=(i.value[e]+1)%m.value.find(p=>p.id===e)?.images.length;else if(u<-50){const p=m.value.find(A=>A.id===e)?.images.length;i.value[e]=(i.value[e]-1+p)%p}}y.value[e]=0,_.value[e]=0}const $=[{title:"Produits",href:"/admin/products"}];return(e,t)=>(o(),a(f,null,[c(g(X),{title:"Produits"}),c(R,{breadcrumbs:$},{default:k(()=>[l("div",Q,[l("div",Y,[l("div",Z,[t[3]||(t[3]=l("h3",null,"Total Produits",-1)),l("p",null,r(n.stats.total),1)]),l("div",ee,[t[4]||(t[4]=l("h3",null,"Ajoutés cette semaine",-1)),l("p",null,r(n.stats.addedThisWeek),1)]),(o(!0),a(f,null,w(n.stats.byCategory,s=>(o(),a("div",{key:s.category?.id,class:"kpi-card"},[l("h3",null,r(s.category?.name||"Non catégorisé"),1),l("p",null,r(s.count),1)]))),128))]),l("div",te,[C(l("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>h.value=s),placeholder:"Rechercher un produit...",class:"border p-2 rounded flex-1 min-w-[200px]"},null,512),[[B,h.value]]),C(l("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>v.value=s),class:"border p-2 rounded min-w-[160px]"},[t[5]||(t[5]=l("option",{value:""},"Toutes les catégories",-1)),(o(!0),a(f,null,w(n.categories,s=>(o(),a("option",{key:s.id,value:s.id},r(s.name),9,se))),128))],512),[[H,v.value]]),l("div",le,[l("button",{onClick:t[2]||(t[2]=D(s=>b.value=!b.value,["stop"])),class:"p-2 border rounded hover:bg-gray-100 dark:hover:bg-gray-700"},"⋮"),b.value?(o(),a("div",ae,[l("ul",null,[l("li",null,[c(g(I),{prefetch:"",href:g(J).create().url,class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700"},{default:k(()=>[...t[6]||(t[6]=[G(" Créer un produit ",-1)])]),_:1},8,["href"])])])])):q("",!0)])]),l("div",oe,[(o(!0),a(f,null,w(m.value,s=>(o(),a("div",{key:s.id,class:"border rounded flex flex-col gap-2 bg-white dark:bg-[#1E1E1E] relative overflow-hidden"},[l("div",{class:"relative rounded min-h-[160px] sm:min-h-[200px] md:min-h-[240px] lg:min-h-[260px]",onTouchstart:u=>j(u,s.id),onTouchmove:u=>z(u,s.id),onTouchend:()=>N(s.id)},[s.images.length?(o(),a("img",{key:0,src:E(s.images[i.value[s.id]||0]?.path),alt:s.title,class:"w-full h-full object-cover rounded transition-opacity duration-700",loading:"lazy"},null,8,ne)):(o(),a("div",ie,[...t[7]||(t[7]=[l("span",{class:"text-gray-500 text-sm"},"Aucune image",-1)])])),l("div",ue,[c(g(I),{href:`/admin/products/${s.id}/edit`,class:"p-1 bg-blue-500 text-white rounded hover:bg-blue-600"},{default:k(()=>[c(g(K),{class:"w-4 h-4"})]),_:1},8,["href"]),l("button",{onClick:u=>S(s.id),class:"p-1 bg-red-500 text-white rounded hover:bg-red-600"},[c(g(O),{class:"w-4 h-4"})],8,de)])],40,re),l("div",ce,[l("h3",ge,r(s.title),1),l("p",he,r(s.category?.name||"Non catégorisé"),1),l("p",ve,r(s.prix)+" FCFA",1)])]))),128))])])]),_:1})],64))}});export{Ce as default};
