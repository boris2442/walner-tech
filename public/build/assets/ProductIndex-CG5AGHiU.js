import{O as q,P as D,Q as E,y as c,c as z,l as U,a as n,e as r,f as h,g as p,b as a,u as l,h as J,H as Q,I as G,M as j,L as x,F as m,z as C,t as k,R as K,w as y,o,A as I,j as X,S as Y,N as B,T as Z}from"./app-B29d6P1Q.js";import{P as ee,M as te,_ as ae,a as se}from"./pagination-CcdzrfVs.js";import{F as re}from"./FlashMessageFrontend-DssQTsi9.js";import{T as oe,N as ne,L as le,_ as ie}from"./TopBanner-DxBYMu-y.js";import{F as de}from"./FloatingAction-CKLfWj_n.js";import{L as ce,S as ue,A as fe,a as me,b as ve,_ as ge}from"./Testimony-BarRkF1E.js";import{C as M,c as he}from"./CartWidget-DQKBqA9s.js";import{F as pe}from"./FlashMessageNewsletter-DZvFpI9T.js";import{_ as xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as ke}from"./createLucideIcon-BCf4rYZx.js";import"./index-Cxt9f7JL.js";import"./index-BdvXPHPK.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=ke("ShoppingCartIcon",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),be={class:"dark:bg-dark-background dark:text-dark-white bg-background-light text-text-dark p-8 transition-colors duration-300"},_e={class:"relative mx-auto w-full max-w-md"},we={class:"mb-4 flex justify-start gap-3 overflow-x-auto px-2 whitespace-nowrap"},Ce=["onClick"],Se={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5"},$e={class:"overflow-hidden rounded"},je=["src","alt"],Ie=["src","alt"],Ve={class:"flex flex-1 flex-col p-3"},Fe={class:"mt-2 mb-1 truncate text-sm font-medium"},Le={class:"mt-1 flex justify-between"},Te={class:"dark:text-dark-grey text-[10px] text-gray-500"},ze={class:"rounded-full border border-[var(--accent-cyan)] px-2 py-1 font-semibold text-[var(--accent-cyan)] dark:border-[var(--dark-grey)] dark:text-[var(--dark-grey)]"},Be={class:"mt-auto flex items-center justify-between p-3 py-1"},Me=["onClick"],Ne=["onClick"],Ae={class:"ml-1 text-xs font-extrabold dark:text-[var(--dark-grey)]"},Re={class:"m-2 flex items-center justify-center rounded-xl border-2 border-blue-700 px-3 py-2 text-center text-sm font-semibold text-blue-700 transition-colors duration-200 hover:bg-blue-700 hover:text-white"},Pe={key:0,class:"dark:text-dark-grey mt-6 text-center text-gray-500"},Oe=["src"],We={__name:"ProductIndex",props:{products:Array,categories:Array,filters:Object,auth:Object,seo:Object},setup(S){q.add(D,E);const v=S,g=c(v.filters.search||""),b=c(v.filters.category||""),$=c(!1),u=c(!0),_=c(!0),N=c([]),A=z(()=>window.innerWidth>=1024?20:window.innerWidth>=768?12:window.innerWidth>=640?8:4),d=c({show:!1,src:"",x:0,y:0,dx:0,dy:0});U(()=>{const t=localStorage.getItem("cart");t&&(N.value=JSON.parse(t)),$.value=localStorage.getItem("darkMode")==="true",sessionStorage.getItem("hasVisited")?(_.value=!1,u.value=!0,setTimeout(()=>{u.value=!1},1e3)):(_.value=!0,u.value=!0,setTimeout(()=>{_.value=!1,setTimeout(()=>{u.value=!1},1e3)},2e3),sessionStorage.setItem("hasVisited","true"))});const V=z(()=>v.products.filter(t=>{const s=t.title.toLowerCase().includes(g.value.toLowerCase()),e=b.value===""||t.category_id===b.value;return s&&e}));function R(t){if(!v.auth?.user){confirm(`Vous devez être connecté pour aimer un produit.
Voulez-vous vous connecter maintenant ?`)&&B.visit("/login");return}Z.post(`/like/${t.id}`).then(s=>{t.liked=s.data.liked,t.likes_count=s.data.likesCount}).catch(()=>{})}function F(t){return["border-none",b.value===t?"underline text-[var(--accent-cyan)]":"text-text-dark hover:text-[var(--accent-cyan)]"]}function L(t){b.value=t}function P(){}function O(t,s){if(!v.auth?.user){confirm(`Vous devez être connecté pour ajouter un produit au panier.
Voulez-vous vous connecter maintenant ?`)&&B.visit("/login");return}const e=t.currentTarget.closest(".product-card").querySelector("img"),i=document.querySelector(".fixed.bottom-6.right-6 button");if(!e||!i)return;const f=e.getBoundingClientRect(),w=i.getBoundingClientRect(),W=w.left+w.width/2-(f.left+f.width/2),H=w.top+w.height/2-(f.top+f.height/2);d.value={show:!0,src:e.src,x:f.left,y:f.top,dx:W,dy:H},he.add(s),setTimeout(()=>{d.value.show=!1},800)}function T(t){return t?`/${t}`:"/fallback.png"}return(t,s)=>(o(),n(m,null,[r(l(J),{title:S.seo.title},null,8,["title"]),_.value?(o(),h(ce,{key:0})):p("",!0),r(oe),r(ne,{auth:t.$page.props.auth,class:"mt-10 md:mt-12"},null,8,["auth"]),t.$page.props.flash?.message?(o(),h(re,{key:1,message:t.$page.props.flash.message,link:t.$page.props.flash.link},null,8,["message","link"])):p("",!0),r(de),r(pe),a("section",null,[a("div",be,[a("div",_e,[Q(a("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>g.value=e),onInput:P,type:"text",placeholder:"Rechercher un produit...",class:"custom-input"},null,544),[[G,g.value]]),r(l(j),{icon:"magnifying-glass",class:"custom-icon"}),g.value?(o(),n("button",{key:0,onClick:s[1]||(s[1]=e=>g.value=""),type:"button",class:"clear-btn"},"✕")):p("",!0)]),a("div",we,[a("span",{onClick:s[2]||(s[2]=e=>L("")),class:x([F(""),"inline-block cursor-pointer px-4 py-2 text-sm font-medium transition-colors duration-300 dark:text-[var(--dark-grey)]"])},"Tous",2),(o(!0),n(m,null,C(S.categories,e=>(o(),n("span",{key:e.id,onClick:i=>L(e.id),class:x([F(e.id),"inline-block cursor-pointer px-4 py-2 text-sm font-medium text-[var(--dark-blue)] transition-colors duration-300 dark:text-[var(--dark-grey)]"])},k(e.name),11,Ce))),128))]),s[5]||(s[5]=a("hr",{class:"mb-6 border-t border-gray-300 dark:border-[var(--dark-grey)]"},null,-1)),a("div",Se,[u.value?(o(!0),n(m,{key:0},C(A.value,e=>(o(),n("div",{key:e,class:"product-card flex flex-col overflow-hidden rounded shadow-md"},[...s[3]||(s[3]=[K('<div class="skeleton mb-3 h-40 w-full rounded" data-v-2551d314></div><div class="flex flex-1 flex-col p-3" data-v-2551d314><div class="skeleton mb-2 h-4 w-3/4 rounded" data-v-2551d314></div><div class="skeleton h-3 w-1/2 rounded" data-v-2551d314></div></div><div class="mt-auto flex items-center justify-between p-3" data-v-2551d314><div class="skeleton h-6 w-6 rounded-full" data-v-2551d314></div><div class="skeleton h-6 w-6 rounded-full" data-v-2551d314></div></div>',3)])]))),128)):(o(),n(m,{key:1},[(o(!0),n(m,null,C(V.value,e=>(o(),n("div",{key:e.id,class:x(["product-card flex flex-col rounded transition-transform duration-300 hover:scale-105",$.value?"border border-[var(--dark-grey)] bg-[var(--dark-background)] shadow-md":"bg-background-light shadow-md"])},[a("div",$e,[e.images.length>1?(o(),h(l(me),{key:0,modules:[l(fe),l(ee)],autoplay:{delay:3e3},pagination:"",loop:""},{default:y(()=>[(o(!0),n(m,null,C(e.images,i=>(o(),h(l(ue),{key:i.id},{default:y(()=>[r(l(I),{href:`/products/${e.slug}`,prefetch:"",class:"hover:underline"},{default:y(()=>[a("img",{src:T(i.url_image),alt:e.title,loading:"lazy",class:"h-40 w-full rounded object-cover transition-transform duration-300 hover:scale-110"},null,8,je)]),_:2},1032,["href"])]),_:2},1024))),128))]),_:2},1032,["modules"])):(o(),h(l(I),{key:1,href:`/products/${e.slug}`,prefetch:"",class:"hover:underline"},{default:y(()=>[a("img",{src:T(e.images[0]?.url_image),alt:e.title,loading:"lazy",class:"h-40 w-full rounded object-cover transition-transform duration-300 hover:scale-110"},null,8,Ie)]),_:2},1032,["href"]))]),a("div",Ve,[a("h3",Fe,k(e.title),1),a("div",Le,[a("p",Te,[a("span",ze,k(e.category.name),1)]),a("p",{class:x(["text-sm font-bold",$.value?"text-dark-white":"text-text-dark"])},k(e.prix)+" FCFA",3)])]),a("div",Be,[a("button",{onClick:i=>O(i,e),"aria-label":"Bouton ajout au panier",title:"ajout au panier",class:"text-[var(--accent-cyan)] transition-transform duration-200 hover:scale-125 active:scale-90 dark:text-white"},[r(l(j),{icon:["fas","cart-shopping"]})],8,Me),a("button",{onClick:i=>R(e),"aria-label":"Bouton liker le produit",title:"Liker le produit",class:x(["transition-transform duration-200 hover:scale-125 active:scale-90",e.liked?"text-red-500":"text-[var(--accent-cyan)]"])},[r(l(j),{icon:["far","heart"]}),a("span",Ae,k(e.likes_count),1)],10,Ne)]),a("div",Re,[r(l(I),{href:`/products/${e.slug}`,prefetch:"",class:"flex w-full items-center justify-center text-center dark:text-white"},{default:y(()=>[r(l(ye),{class:"animate-spin-slow mr-2"}),s[4]||(s[4]=X(" Voir plus ",-1))]),_:1},8,["href"])])],2))),128)),r(M)],64))]),!u.value&&V.value.length===0?(o(),n("div",Pe," Aucun produit trouvé ")):p("",!0),r(M)])]),r(te),r(ae),r(ve),r(se),r(ge),r(le),r(ie),d.value.show?(o(),n("img",{key:2,src:d.value.src,style:Y({top:d.value.y+"px",left:d.value.x+"px",transform:"translate("+d.value.dx+"px,"+d.value.dy+"px) scale(0.2)",transition:"transform 0.8s ease-in-out, opacity 0.8s ease-in-out",opacity:1}),class:"pointer-events-none fixed z-50 h-20 w-20 rounded-lg"},null,12,Oe)):p("",!0)],64))}},et=xe(We,[["__scopeId","data-v-2551d314"]]);export{et as default};
