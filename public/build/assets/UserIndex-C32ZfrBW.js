import{d as $,r as b,w as M,U as _,B as T,N as V,c as i,g as A,j as p,b as u,u as v,e as E,f as j,k as s,m as n,O as k,P as B,l as r,F as m,q as g,R as D,E as F,Q as x}from"./app-ynzlXQ8f.js";import{u as I,_ as N}from"./AppLayout.vue_vue_type_script_setup_true_lang-hMH2btbh.js";import{d as H}from"./dayjs.min-CIPObrlc.js";import{F as R}from"./FlashMessageFrontend-DG7MzMuq.js";import{_ as Y}from"./BackButton-DIvlYmnT.js";import{d as z}from"./index-BdvXPHPK.js";import{T as O}from"./trash-2-Dk3oKAsi.js";import"./index-DOh8MOWf.js";import"./useForwardExpose-IqRmxT0A.js";import"./VisuallyHidden-Bo3i3aW3.js";import"./RovingFocusGroup-C6EAY96f.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DTXn5Fdt.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"flex flex-col gap-4 p-4 overflow-x-auto"},P={class:"grid gap-4 grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4"},Q={class:"kpi-card"},G={class:"kpi-text"},J={class:"kpi-card"},K={class:"kpi-text"},W={class:"kpi-card"},X={class:"kpi-text"},Z={class:"kpi-card"},ss={class:"kpi-text"},es={class:"kpi-card"},ts={class:"kpi-text"},os={class:"relative rounded-xl border border-sidebar-border/70 dark:border-sidebar-border min-h-[50vh]"},rs={class:"flex flex-col md:flex-row gap-2 md:gap-4 mb-4 p-2"},ls={class:"relative w-full"},as={class:"relative"},is={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border rounded shadow-lg z-50"},ns={class:"overflow-x-auto"},ds={class:"w-full text-left border-collapse text-[0.75rem] sm:text-[0.75rem] md:text-[0.875rem] lg:text-[0.875rem]"},us={class:"p-2 truncate max-w-[150px]"},cs={class:"p-2"},ps={class:"p-2"},ms={class:"p-2"},vs=["onUpdate:modelValue","onChange"],gs=["value"],fs={class:"p-2"},hs={class:"text-xs"},bs={class:"p-2 flex gap-2"},_s=["onClick"],ks={key:0},xs={class:"flex justify-center mt-6 mb-4"},ys={class:"flex gap-2 mt-4 justify-end"},ws=["innerHTML","disabled","onClick"],Is=$({__name:"UserIndex",props:{stats:{},users:{},filters:{},roles:{}},setup(y){const l=y,w=[{title:"dashboard",href:z().url},{title:"Users List",href:I.index().url}],a=b(l.filters.search||"");M(a,o=>{_.get("/admin/users",{search:o},{preserveState:!0,replace:!0})});const f=T(()=>a.value?l.users.data.filter(o=>(o.name??"").toLowerCase().includes(a.value.toLowerCase())||(o.phone??"").toLowerCase().includes(a.value.toLowerCase())||(o.role??"").toLowerCase().includes(a.value.toLowerCase())||(o.email??"").toLowerCase().includes(a.value.toLowerCase())):l.users.data);function C(o){return H(o).format("DD/MM/YYYY HH:mm")}const c=b(!1);function L(o){o.target.closest(".relative")||(c.value=!1)}document.addEventListener("click",L);const S=o=>{confirm("Voulez-vous vraiment supprimer cette catÃ©gorie ?")&&x.Inertia.delete(`/admin/users/${o}`,{onSuccess:()=>{},preserveScroll:!0})};function U(o,e){x.Inertia.put(`/admin/users/${o}/role`,{role:e},{preserveScroll:!0,onSuccess:()=>{},onError:h=>{}})}return(o,e)=>{const h=V("font-awesome-icon");return r(),i(m,null,[o.$page.props.flash?.message?(r(),A(R,{key:0,message:o.$page.props.flash.message,link:o.$page.props.flash.link},null,8,["message","link"])):p("",!0),u(v(E),{title:"Users List"}),u(N,{breadcrumbs:w},{default:j(()=>[s("div",q,[u(Y,{class:"m-4"}),s("div",P,[s("div",Q,[e[4]||(e[4]=s("div",{class:"kpi-icon"},"ðŸ‘¥",-1)),s("div",G,[e[3]||(e[3]=s("h3",null,"Total Utilisateurs",-1)),s("p",null,n(l.stats.total),1)])]),s("div",J,[e[6]||(e[6]=s("div",{class:"kpi-icon"},"ðŸ†•",-1)),s("div",K,[e[5]||(e[5]=s("h3",null,"Inscrits Aujourd'hui",-1)),s("p",null,n(l.stats.today),1)])]),s("div",W,[e[8]||(e[8]=s("div",{class:"kpi-icon"},"ðŸ›¡ï¸",-1)),s("div",X,[e[7]||(e[7]=s("h3",null,"Administrateurs",-1)),s("p",null,n(l.stats.admins),1)])]),s("div",Z,[e[10]||(e[10]=s("div",{class:"kpi-icon"},"ðŸ‘¤",-1)),s("div",ss,[e[9]||(e[9]=s("h3",null,"Utilisateurs",-1)),s("p",null,n(l.stats.clients),1)])]),s("div",es,[e[12]||(e[12]=s("div",{class:"kpi-icon"},"ðŸ‘¤",-1)),s("div",ts,[e[11]||(e[11]=s("h3",null,"Inscrit cette semaine",-1)),s("p",null,n(l.stats.week),1)])])]),e[16]||(e[16]=s("h1",{class:"text-xl font-bold mb-4 text-[var(--primary-blue)] dark:text-[var(--dark-gold)] my-2"}," Listes des utilisateurs ",-1)),s("div",os,[s("div",rs,[s("div",ls,[k(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>a.value=t),type:"text",placeholder:"Search...",class:"custom-input"},null,512),[[B,a.value]]),u(h,{icon:"magnifying-glass",class:"custom-icon"}),a.value?(r(),i("button",{key:0,onClick:e[1]||(e[1]=t=>a.value=""),type:"button",class:"clear-btn"}," âœ• ")):p("",!0)]),s("div",as,[s("button",{onClick:e[2]||(e[2]=t=>c.value=!c.value),class:"p-2 border rounded hover:bg-gray-100 dark:hover:bg-gray-700"}," â‹® "),c.value?(r(),i("div",is,[...e[13]||(e[13]=[s("ul",null,[s("li",null,"Rien.A.Signaler")],-1)])])):p("",!0)])]),s("div",ns,[s("table",ds,[e[15]||(e[15]=s("thead",null,[s("tr",{class:"border-b"},[s("th",{class:"p-2"},"Nom"),s("th",{class:"p-2"},"Email"),s("th",{class:"p-2"},"TÃ©lÃ©phone"),s("th",{class:"p-2"},"RÃ´le"),s("th",{class:"p-2"},"CrÃ©Ã© le"),s("th",{class:"p-2"},"Actions")])],-1)),s("tbody",null,[(r(!0),i(m,null,g(f.value,t=>(r(),i("tr",{key:t.id,class:"border-b hover:bg-gray-100 dark:hover:bg-gray-700"},[s("td",us,n(t.name),1),s("td",cs,n(t.email),1),s("td",ps,n(t.phone),1),s("td",ms,[k(s("select",{"onUpdate:modelValue":d=>t.role=d,onChange:d=>U(t.id,d.target.value),class:"border rounded px-2 py-1 text-sm"},[(r(!0),i(m,null,g(l.roles,d=>(r(),i("option",{key:d,value:d},n(d),9,gs))),128))],40,vs),[[D,t.role]])]),s("td",fs,[s("i",hs,n(C(t.created_at)),1)]),s("td",bs,[s("button",{class:"text-red-500 hover:text-red-700",title:"Supprimer",onClick:d=>S(t.id)},[u(v(O),{class:"w-4 h-4 md:w-5 md:h-5"})],8,_s)])]))),128)),f.value.length===0?(r(),i("tr",ks,[...e[14]||(e[14]=[s("td",{colspan:"7",class:"text-center p-4 text-gray-500"}," Aucun utilisateur trouvÃ© ",-1)])])):p("",!0)])])]),s("div",xs,[s("nav",ys,[(r(!0),i(m,null,g(l.users.links,t=>(r(),i("button",{key:t.label,innerHTML:t.label,disabled:!t.url,onClick:F(d=>t.url&&v(_).get(t.url,{},{preserveState:!0}),["prevent"]),class:"px-3 py-1 border rounded disabled:opacity-50 hover:bg-gray-100 dark:hover:bg-gray-700"},null,8,ws))),128))])])])])]),_:1})],64)}}});export{Is as default};
