import{a5 as B,y,c as b,B as N,a as n,b as t,g as p,e as _,u as w,M as S,t as l,w as T,o as i,F as V,z as W,j,V as D,D as L,N as M}from"./app-7z9xG3e_.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as E}from"./createLucideIcon-DzP1l2ya.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=E("MessageCircleIcon",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),u=B({items:JSON.parse(localStorage.getItem("cart")||"[]"),save(){localStorage.setItem("cart",JSON.stringify(this.items))},add(a){const e=this.items.find(c=>c.id===a.id);e?e.quantity+=1:this.items.push({...a,quantity:1}),this.save()},increase(a){a.quantity++,this.save()},decrease(a){if(a.quantity>1)a.quantity--;else{const e=this.items.findIndex(c=>c.id===a.id);e!==-1&&this.items.splice(e,1)}this.save()},totalItems(){return this.items.reduce((a,e)=>a+e.quantity,0)},totalPrice(){return this.items.reduce((a,e)=>a+e.prix*e.quantity,0)}}),P={class:"fixed bottom-6 right-6 z-50 flex flex-col items-end"},J={key:0,class:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs"},R={key:0,class:"absolute bottom-14 right-0 bg-red-500 text-white text-xs py-1 px-2 rounded shadow-lg"},U={key:0,class:"cart-widget absolute bottom-14 right-0 z-50 w-80 max-h-96 bg-[var(--accent-cyan)] dark:bg-dark-background shadow-lg rounded-lg overflow-y-auto p-3 cart-scroll mt-2"},Z={key:0,class:"text-sm text-gray-400 dark:text-dark-grey text-center"},G=["src"],H={class:"flex-1"},K={class:"text-sm font-medium truncate text-gray-100"},Q={class:"text-xs text-[var(--dark-gold)]"},X={class:"flex items-center mt-1 gap-1"},Y=["onClick"],ee={class:"px-2"},te=["onClick"],ae={class:"flex justify-between font-semibold"},se={class:"text-[var(--dark-white)] underline"},re=["disabled"],oe={__name:"CartWidget",setup(a){const e=y(!1);function c(){e.value=!e.value}const d=b(()=>u.items),h=b(()=>u.totalItems()),k=b(()=>u.totalPrice());function C(r){u.increase(r)}function q(r){u.decrease(r)}function A(r){return r?`/${r}`:"/fallback.png"}function F(){const o=L().props.auth?.user,s=o?.name||"Client Walner Tech";if(!o){confirm(`‚ö†Ô∏è Vous devez √™tre connect√© pour pouvoir effectuer une commande.
Souhaitez-vous vous connecter maintenant ?`)&&M.visit("/login");return}const f="237657961059";let x=`*Bonjour √©quipe Walner Tech üëã,*
Je souhaite confirmer ma commande. Voici le r√©capitulatif :

`;d.value.forEach(g=>{x+=`‚Ä¢ ${g.title} (x${g.quantity}) ‚Äî ${g.prix*g.quantity} FCFA
`});const $=new Date().toLocaleString("fr-FR",{timeZone:"Africa/Douala"});x+=`
*Montant total :* ${k.value} FCFA
üïí *Date de commande :* ${$}

Merci de bien vouloir me confirmer la disponibilit√© et les modalit√©s de livraison.

üë§ *Nom du client :* ${s}

Cordialement,
${s}
`,window.open(`https://wa.me/${f}?text=${encodeURIComponent(x)}`,"_blank")}const m=y(null),v=y(!1);function I(){m.value&&(m.value.classList.add("animate-shake"),v.value=!0,setTimeout(()=>{m.value.classList.remove("animate-shake"),v.value=!1},800))}return N(h,r=>{r===0&&I()}),(r,o)=>(i(),n("div",P,[t("button",{onClick:c,type:"button",title:"Ouvrir le panier","aria-label":"Bouton ouvrir le panier",ref_key:"cartButton",ref:m,class:"relative bg-[var(--primary-blue)] rounded-full w-12 h-12 flex items-center justify-center text-[var(--dark-gold)] shadow-lg hover:scale-110 transition-transform"},[_(w(S),{icon:["fas","cart-shopping"],class:"text-2xl"}),h.value>0?(i(),n("span",J,l(h.value),1)):p("",!0)],512),v.value?(i(),n("div",R," Votre panier est vide ! ")):p("",!0),_(D,{name:"fade-slide"},{default:T(()=>[e.value?(i(),n("div",U,[d.value.length===0?(i(),n("div",Z," Le panier est vide üòï ")):p("",!0),(i(!0),n(V,null,W(d.value,s=>(i(),n("div",{key:s.id,class:"flex items-center mb-2"},[t("img",{src:A(s.images?.[0]?.url_image),class:"w-12 h-12 object-cover rounded mr-2"},null,8,G),t("div",H,[t("p",K,l(s.title),1),t("p",Q,l(s.prix)+" FCFA x "+l(s.quantity),1),t("div",X,[t("button",{onClick:f=>q(s),type:"button","aria-label":"Diminuer la quantit√©",title:"Diminuer la quantit√©",class:"bg-gray-200 dark:bg-gray-700 rounded px-2 text-sm hover:bg-gray-300"},"-",8,Y),t("span",ee,l(s.quantity),1),t("button",{onClick:f=>C(s),type:"button","aria-label":"Augmenter la quantit√©",title:"Augmenter la quantit√©",class:"bg-gray-200 dark:bg-gray-700 rounded px-2 text-sm hover:bg-gray-300"},"+",8,te)])])]))),128)),o[2]||(o[2]=t("hr",{class:"my-2 border-gray-300 dark:border-[var(--dark-grey)]"},null,-1)),t("div",ae,[o[0]||(o[0]=t("span",{class:"text-[var(--dark-gold)]"},"Total :",-1)),t("span",se,l(k.value)+" FCFA",1)]),t("button",{type:"button",title:"R√©gler la commande sur WhatsApp","aria-label":"Bouton r√©gler la commande sur WhatsApp",onClick:F,disabled:d.value.length===0,class:"w-full flex items-center justify-center gap-2 bg-white dark:bg-[var(--dark-gold)] text-[var(--accent-cyan)] py-2 rounded transition mt-3 shadow-md hover:scale-[1.02] active:scale-95"},[_(w(O),{class:"w-5 h-5 animate-pulse-glow"}),o[1]||(o[1]=j(" Commander sur WhatsApp ",-1))],8,re)])):p("",!0)]),_:1})]))}},ce=z(oe,[["__scopeId","data-v-97b66eec"]]);export{ce as C,u as c};
