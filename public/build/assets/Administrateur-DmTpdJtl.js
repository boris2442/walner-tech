import{_ as ye}from"./AppLayout.vue_vue_type_script_setup_true_lang-BSB39S4O.js";import{d as _e}from"./index-BdvXPHPK.js";import{d as P,r as m,w as M,o as $,c as p,k as f,l as y,a as xe,m as me,J as Q,K as ge,B as g,b as k,u as ke,e as we,f as Ce,F as Me}from"./app-BFOJuJxN.js";import{m as S,i as R,e as $e,f as Ae,g as ee,r as v,v as Re,t as De,h as Ie,j as Se,A as te,P as G,c as Pe,C as _,p as re,a as H,b as ae,k as Ee,l as se,n as ie,L as oe,d as ne,o as Be,q as Z}from"./chart-DA-3lDA_.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{d as V}from"./dayjs.min-r4aPJODT.js";import"./index-DRkr_GnJ.js";import"./useForwardExpose-CzhV66Sr.js";import"./VisuallyHidden-BjhX9C6_.js";import"./RovingFocusGroup-tePRAqtc.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Cia9DJnb.js";/*!
 * chartjs-plugin-datalabels v2.2.0
 * https://chartjs-plugin-datalabels.netlify.app
 * (c) 2017-2022 chartjs-plugin-datalabels contributors
 * Released under the MIT license
 */var K=(function(){if(typeof window<"u"){if(window.devicePixelRatio)return window.devicePixelRatio;var e=window.screen;if(e)return(e.deviceXDPI||1)/(e.logicalXDPI||1)}return 1})(),D={toTextLines:function(e){var a=[],t;for(e=[].concat(e);e.length;)t=e.pop(),typeof t=="string"?a.unshift.apply(a,t.split(`
`)):Array.isArray(t)?e.push.apply(e,t):R(e)||a.unshift(""+t);return a},textSize:function(e,a,t){var r=[].concat(a),s=r.length,i=e.font,o=0,n;for(e.font=t.string,n=0;n<s;++n)o=Math.max(e.measureText(r[n]).width,o);return e.font=i,{height:s*t.lineHeight,width:o}},bound:function(e,a,t){return Math.max(e,Math.min(a,t))},arrayDiff:function(e,a){var t=e.slice(),r=[],s,i,o,n;for(s=0,o=a.length;s<o;++s)n=a[s],i=t.indexOf(n),i===-1?r.push([n,1]):t.splice(i,1);for(s=0,o=t.length;s<o;++s)r.push([t[s],-1]);return r},rasterize:function(e){return Math.round(e*K)/K}};function U(e,a){var t=a.x,r=a.y;if(t===null)return{x:0,y:-1};if(r===null)return{x:1,y:0};var s=e.x-t,i=e.y-r,o=Math.sqrt(s*s+i*i);return{x:o?s/o:0,y:o?i/o:-1}}function ze(e,a,t,r,s){switch(s){case"center":t=r=0;break;case"bottom":t=0,r=1;break;case"right":t=1,r=0;break;case"left":t=-1,r=0;break;case"top":t=0,r=-1;break;case"start":t=-t,r=-r;break;case"end":break;default:s*=Math.PI/180,t=Math.cos(s),r=Math.sin(s);break}return{x:e,y:a,vx:t,vy:r}}var Te=0,le=1,de=2,ue=4,ce=8;function z(e,a,t){var r=Te;return e<t.left?r|=le:e>t.right&&(r|=de),a<t.top?r|=ce:a>t.bottom&&(r|=ue),r}function je(e,a){for(var t=e.x0,r=e.y0,s=e.x1,i=e.y1,o=z(t,r,a),n=z(s,i,a),l,d,u;!(!(o|n)||o&n);)l=o||n,l&ce?(d=t+(s-t)*(a.top-r)/(i-r),u=a.top):l&ue?(d=t+(s-t)*(a.bottom-r)/(i-r),u=a.bottom):l&de?(u=r+(i-r)*(a.right-t)/(s-t),d=a.right):l&le&&(u=r+(i-r)*(a.left-t)/(s-t),d=a.left),l===o?(t=d,r=u,o=z(t,r,a)):(s=d,i=u,n=z(s,i,a));return{x0:t,x1:s,y0:r,y1:i}}function T(e,a){var t=a.anchor,r=e,s,i;return a.clamp&&(r=je(r,a.area)),t==="start"?(s=r.x0,i=r.y0):t==="end"?(s=r.x1,i=r.y1):(s=(r.x0+r.x1)/2,i=(r.y0+r.y1)/2),ze(s,i,e.vx,e.vy,a.align)}var j={arc:function(e,a){var t=(e.startAngle+e.endAngle)/2,r=Math.cos(t),s=Math.sin(t),i=e.innerRadius,o=e.outerRadius;return T({x0:e.x+r*i,y0:e.y+s*i,x1:e.x+r*o,y1:e.y+s*o,vx:r,vy:s},a)},point:function(e,a){var t=U(e,a.origin),r=t.x*e.options.radius,s=t.y*e.options.radius;return T({x0:e.x-r,y0:e.y-s,x1:e.x+r,y1:e.y+s,vx:t.x,vy:t.y},a)},bar:function(e,a){var t=U(e,a.origin),r=e.x,s=e.y,i=0,o=0;return e.horizontal?(r=Math.min(e.x,e.base),i=Math.abs(e.base-e.x)):(s=Math.min(e.y,e.base),o=Math.abs(e.base-e.y)),T({x0:r,y0:s+o,x1:r+i,y1:s,vx:t.x,vy:t.y},a)},fallback:function(e,a){var t=U(e,a.origin);return T({x0:e.x,y0:e.y,x1:e.x+(e.width||0),y1:e.y+(e.height||0),vx:t.x,vy:t.y},a)}},x=D.rasterize;function Le(e){var a=e.borderWidth||0,t=e.padding,r=e.size.height,s=e.size.width,i=-s/2,o=-r/2;return{frame:{x:i-t.left-a,y:o-t.top-a,w:s+t.width+a*2,h:r+t.height+a*2},text:{x:i,y:o,w:s,h:r}}}function Ne(e,a){var t=a.chart.getDatasetMeta(a.datasetIndex).vScale;if(!t)return null;if(t.xCenter!==void 0&&t.yCenter!==void 0)return{x:t.xCenter,y:t.yCenter};var r=t.getBasePixel();return e.horizontal?{x:r,y:null}:{x:null,y:r}}function Oe(e){return e instanceof te?j.arc:e instanceof G?j.point:e instanceof Pe?j.bar:j.fallback}function We(e,a,t,r,s,i){var o=Math.PI/2;if(i){var n=Math.min(i,s/2,r/2),l=a+n,d=t+n,u=a+r-n,c=t+s-n;e.moveTo(a,d),l<u&&d<c?(e.arc(l,d,n,-Math.PI,-o),e.arc(u,d,n,-o,0),e.arc(u,c,n,0,o),e.arc(l,c,n,o,Math.PI)):l<u?(e.moveTo(l,t),e.arc(u,d,n,-o,o),e.arc(l,d,n,o,Math.PI+o)):d<c?(e.arc(l,d,n,-Math.PI,0),e.arc(l,c,n,0,Math.PI)):e.arc(l,d,n,-Math.PI,Math.PI),e.closePath(),e.moveTo(a,t)}else e.rect(a,t,r,s)}function Fe(e,a,t){var r=t.backgroundColor,s=t.borderColor,i=t.borderWidth;!r&&(!s||!i)||(e.beginPath(),We(e,x(a.x)+i/2,x(a.y)+i/2,x(a.w)-i,x(a.h)-i,t.borderRadius),e.closePath(),r&&(e.fillStyle=r,e.fill()),s&&i&&(e.strokeStyle=s,e.lineWidth=i,e.lineJoin="miter",e.stroke()))}function Ue(e,a,t){var r=t.lineHeight,s=e.w,i=e.x,o=e.y+r/2;return a==="center"?i+=s/2:(a==="end"||a==="right")&&(i+=s),{h:r,w:s,x:i,y:o}}function qe(e,a,t){var r=e.shadowBlur,s=t.stroked,i=x(t.x),o=x(t.y),n=x(t.w);s&&e.strokeText(a,i,o,n),t.filled&&(r&&s&&(e.shadowBlur=0),e.fillText(a,i,o,n),r&&s&&(e.shadowBlur=r))}function Ge(e,a,t,r){var s=r.textAlign,i=r.color,o=!!i,n=r.font,l=a.length,d=r.textStrokeColor,u=r.textStrokeWidth,c=d&&u,b;if(!(!l||!o&&!c))for(t=Ue(t,s,n),e.font=n.string,e.textAlign=s,e.textBaseline="middle",e.shadowBlur=r.textShadowBlur,e.shadowColor=r.textShadowColor,o&&(e.fillStyle=i),c&&(e.lineJoin="round",e.lineWidth=u,e.strokeStyle=d),b=0,l=a.length;b<l;++b)qe(e,a[b],{stroked:c,filled:o,w:t.w,x:t.x,y:t.y+t.h*b})}var fe=function(e,a,t,r){var s=this;s._config=e,s._index=r,s._model=null,s._rects=null,s._ctx=a,s._el=t};S(fe.prototype,{_modelize:function(e,a,t,r){var s=this,i=s._index,o=De(v([t.font,{}],r,i)),n=v([t.color,Ie.color],r,i);return{align:v([t.align,"center"],r,i),anchor:v([t.anchor,"center"],r,i),area:r.chart.chartArea,backgroundColor:v([t.backgroundColor,null],r,i),borderColor:v([t.borderColor,null],r,i),borderRadius:v([t.borderRadius,0],r,i),borderWidth:v([t.borderWidth,0],r,i),clamp:v([t.clamp,!1],r,i),clip:v([t.clip,!1],r,i),color:n,display:e,font:o,lines:a,offset:v([t.offset,4],r,i),opacity:v([t.opacity,1],r,i),origin:Ne(s._el,r),padding:Se(v([t.padding,4],r,i)),positioner:Oe(s._el),rotation:v([t.rotation,0],r,i)*(Math.PI/180),size:D.textSize(s._ctx,a,o),textAlign:v([t.textAlign,"start"],r,i),textShadowBlur:v([t.textShadowBlur,0],r,i),textShadowColor:v([t.textShadowColor,n],r,i),textStrokeColor:v([t.textStrokeColor,n],r,i),textStrokeWidth:v([t.textStrokeWidth,0],r,i)}},update:function(e){var a=this,t=null,r=null,s=a._index,i=a._config,o,n,l,d=v([i.display,!0],e,s);d&&(o=e.dataset.data[s],n=Re(ee(i.formatter,[o,e]),o),l=R(n)?[]:D.toTextLines(n),l.length&&(t=a._modelize(d,l,i,e),r=Le(t))),a._model=t,a._rects=r},geometry:function(){return this._rects?this._rects.frame:{}},rotation:function(){return this._model?this._model.rotation:0},visible:function(){return this._model&&this._model.opacity},model:function(){return this._model},draw:function(e,a){var t=this,r=e.ctx,s=t._model,i=t._rects,o;this.visible()&&(r.save(),s.clip&&(o=s.area,r.beginPath(),r.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),r.clip()),r.globalAlpha=D.bound(0,s.opacity,1),r.translate(x(a.x),x(a.y)),r.rotate(s.rotation),Fe(r,i.frame,s),Ge(r,s.lines,i.text,s),r.restore())}});var He=Number.MIN_SAFE_INTEGER||-9007199254740991,Ze=Number.MAX_SAFE_INTEGER||9007199254740991;function A(e,a,t){var r=Math.cos(t),s=Math.sin(t),i=a.x,o=a.y;return{x:i+r*(e.x-i)-s*(e.y-o),y:o+s*(e.x-i)+r*(e.y-o)}}function Y(e,a){var t=Ze,r=He,s=a.origin,i,o,n,l,d;for(i=0;i<e.length;++i)o=e[i],n=o.x-s.x,l=o.y-s.y,d=a.vx*n+a.vy*l,t=Math.min(t,d),r=Math.max(r,d);return{min:t,max:r}}function L(e,a){var t=a.x-e.x,r=a.y-e.y,s=Math.sqrt(t*t+r*r);return{vx:(a.x-e.x)/s,vy:(a.y-e.y)/s,origin:e,ln:s}}var ve=function(){this._rotation=0,this._rect={x:0,y:0,w:0,h:0}};S(ve.prototype,{center:function(){var e=this._rect;return{x:e.x+e.w/2,y:e.y+e.h/2}},update:function(e,a,t){this._rotation=t,this._rect={x:a.x+e.x,y:a.y+e.y,w:a.w,h:a.h}},contains:function(e){var a=this,t=1,r=a._rect;return e=A(e,a.center(),-a._rotation),!(e.x<r.x-t||e.y<r.y-t||e.x>r.x+r.w+t*2||e.y>r.y+r.h+t*2)},intersects:function(e){var a=this._points(),t=e._points(),r=[L(a[0],a[1]),L(a[0],a[3])],s,i,o;for(this._rotation!==e._rotation&&r.push(L(t[0],t[1]),L(t[0],t[3])),s=0;s<r.length;++s)if(i=Y(a,r[s]),o=Y(t,r[s]),i.max<o.min||o.max<i.min)return!1;return!0},_points:function(){var e=this,a=e._rect,t=e._rotation,r=e.center();return[A({x:a.x,y:a.y},r,t),A({x:a.x+a.w,y:a.y},r,t),A({x:a.x+a.w,y:a.y+a.h},r,t),A({x:a.x,y:a.y+a.h},r,t)]}});function he(e,a,t){var r=a.positioner(e,a),s=r.vx,i=r.vy;if(!s&&!i)return{x:r.x,y:r.y};var o=t.w,n=t.h,l=a.rotation,d=Math.abs(o/2*Math.cos(l))+Math.abs(n/2*Math.sin(l)),u=Math.abs(o/2*Math.sin(l))+Math.abs(n/2*Math.cos(l)),c=1/Math.max(Math.abs(s),Math.abs(i));return d*=s*c,u*=i*c,d+=a.offset*s,u+=a.offset*i,{x:r.x+d,y:r.y+u}}function Xe(e,a){var t,r,s,i;for(t=e.length-1;t>=0;--t)for(s=e[t].$layout,r=t-1;r>=0&&s._visible;--r)i=e[r].$layout,i._visible&&s._box.intersects(i._box)&&a(s,i);return e}function Je(e){var a,t,r,s,i,o,n;for(a=0,t=e.length;a<t;++a)r=e[a],s=r.$layout,s._visible&&(n=new Proxy(r._el,{get:(l,d)=>l.getProps([d],!0)[d]}),i=r.geometry(),o=he(n,r.model(),i),s._box.update(o,i,r.rotation()));return Xe(e,function(l,d){var u=l._hidable,c=d._hidable;u&&c||c?d._visible=!1:u&&(l._visible=!1)})}var I={prepare:function(e){var a=[],t,r,s,i,o;for(t=0,s=e.length;t<s;++t)for(r=0,i=e[t].length;r<i;++r)o=e[t][r],a.push(o),o.$layout={_box:new ve,_hidable:!1,_visible:!0,_set:t,_idx:o._index};return a.sort(function(n,l){var d=n.$layout,u=l.$layout;return d._idx===u._idx?u._set-d._set:u._idx-d._idx}),this.update(a),a},update:function(e){var a=!1,t,r,s,i,o;for(t=0,r=e.length;t<r;++t)s=e[t],i=s.model(),o=s.$layout,o._hidable=i&&i.display==="auto",o._visible=s.visible(),a|=o._hidable;a&&Je(e)},lookup:function(e,a){var t,r;for(t=e.length-1;t>=0;--t)if(r=e[t].$layout,r&&r._visible&&r._box.contains(a))return e[t];return null},draw:function(e,a){var t,r,s,i,o,n;for(t=0,r=a.length;t<r;++t)s=a[t],i=s.$layout,i._visible&&(o=s.geometry(),n=he(s._el,s.model(),o),i._box.update(n,o,s.rotation()),s.draw(e,n))}},Ve=function(e){if(R(e))return null;var a=e,t,r,s;if($e(e))if(!R(e.label))a=e.label;else if(!R(e.r))a=e.r;else for(a="",t=Object.keys(e),s=0,r=t.length;s<r;++s)a+=(s!==0?", ":"")+t[s]+": "+e[t[s]];return""+a},Ke={align:"center",anchor:"center",backgroundColor:null,borderColor:null,borderRadius:0,borderWidth:0,clamp:!1,clip:!1,color:void 0,display:!0,font:{family:void 0,lineHeight:1.2,size:void 0,style:void 0,weight:null},formatter:Ve,labels:void 0,listeners:{},offset:4,opacity:1,padding:{top:4,right:4,bottom:4,left:4},rotation:0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,textShadowBlur:0,textShadowColor:void 0},h="$datalabels",be="$default";function Ye(e,a){var t=e.datalabels,r={},s=[],i,o;return t===!1?null:(t===!0&&(t={}),a=S({},[a,t]),i=a.labels||{},o=Object.keys(i),delete a.labels,o.length?o.forEach(function(n){i[n]&&s.push(S({},[a,i[n],{_key:n}]))}):s.push(a),r=s.reduce(function(n,l){return Ae(l.listeners||{},function(d,u){n[u]=n[u]||{},n[u][l._key||be]=d}),delete l.listeners,n},{}),{labels:s,listeners:r})}function q(e,a,t,r){if(a){var s=t.$context,i=t.$groups,o;a[i._set]&&(o=a[i._set][i._key],o&&ee(o,[s,r])===!0&&(e[h]._dirty=!0,t.update(s)))}}function Qe(e,a,t,r,s){var i,o;!t&&!r||(t?r?t!==r&&(o=i=!0):o=!0:i=!0,o&&q(e,a.leave,t,s),i&&q(e,a.enter,r,s))}function et(e,a){var t=e[h],r=t._listeners,s,i;if(!(!r.enter&&!r.leave)){if(a.type==="mousemove")i=I.lookup(t._labels,a);else if(a.type!=="mouseout")return;s=t._hovered,t._hovered=i,Qe(e,r,s,i,a)}}function tt(e,a){var t=e[h],r=t._listeners.click,s=r&&I.lookup(t._labels,a);s&&q(e,r,s,a)}var N={id:"datalabels",defaults:Ke,beforeInit:function(e){e[h]={_actives:[]}},beforeUpdate:function(e){var a=e[h];a._listened=!1,a._listeners={},a._datasets=[],a._labels=[]},afterDatasetUpdate:function(e,a,t){var r=a.index,s=e[h],i=s._datasets[r]=[],o=e.isDatasetVisible(r),n=e.data.datasets[r],l=Ye(n,t),d=a.meta.data||[],u=e.ctx,c,b,E,X,W,J,C,w;for(u.save(),c=0,E=d.length;c<E;++c)if(C=d[c],C[h]=[],o&&C&&e.getDataVisibility(c)&&!C.skip)for(b=0,X=l.labels.length;b<X;++b)W=l.labels[b],J=W._key,w=new fe(W,u,C,c),w.$groups={_set:r,_key:J||be},w.$context={active:!1,chart:e,dataIndex:c,dataset:n,datasetIndex:r},w.update(w.$context),C[h].push(w),i.push(w);u.restore(),S(s._listeners,l.listeners,{merger:function(B,F,pe){F[B]=F[B]||{},F[B][a.index]=pe[B],s._listened=!0}})},afterUpdate:function(e){e[h]._labels=I.prepare(e[h]._datasets)},afterDatasetsDraw:function(e){I.draw(e,e[h]._labels)},beforeEvent:function(e,a){if(e[h]._listened){var t=a.event;switch(t.type){case"mousemove":case"mouseout":et(e,t);break;case"click":tt(e,t);break}}},afterEvent:function(e){var a=e[h],t=a._actives,r=a._actives=e.getActiveElements(),s=D.arrayDiff(t,r),i,o,n,l,d,u,c;for(i=0,o=s.length;i<o;++i)if(d=s[i],d[1])for(c=d[0].element[h]||[],n=0,l=c.length;n<l;++n)u=c[n],u.$context.active=d[1]===1,u.update(u.$context);(a._dirty||s.length)&&(I.update(a._labels),e.render()),delete a._dirty}};const rt={class:"h-full p-4 flex flex-col"},at={class:"flex-1 min-h-[260px]"},st={key:1,class:"h-72 flex items-center justify-center text-gray-500 dark:text-gray-400"},it=P({__name:"CategoryPieChart",props:{data:{type:Array,required:!0}},setup(e){_.register(re,H,ae,te,Ee,N);const a=e,t=m(null);let r=null;const s=["#6997ee","#9bb4e1","#090909","#4D4D4D","#003366","#FFE600","#CCCCCC"],i=m({labels:[],datasets:[{data:[],backgroundColor:[]}]}),o=()=>{t.value&&(r?(r.data=i.value,r.update()):r=new _(t.value,{type:"pie",data:i.value,plugins:[N]}))};return M(()=>a.data,n=>{if(!n.length){i.value.labels=[],i.value.datasets[0].data=[],i.value.datasets[0].backgroundColor=[],o();return}i.value.labels=n.map(l=>l.name),i.value.datasets[0].data=n.map(l=>Number(l.count||0)),i.value.datasets[0].backgroundColor=n.map((l,d)=>s[d%s.length]),o()},{immediate:!0}),$(()=>o()),(n,l)=>(y(),p("div",rt,[l[0]||(l[0]=f("h3",{class:"text-lg font-semibold mb-3"},"Répartition des produits par catégorie",-1)),f("div",at,[i.value.labels.length?(y(),p("canvas",{key:0,ref_key:"chartRef",ref:t,class:"w-full h-full"},null,512)):(y(),p("div",st," Aucune donnée disponible "))])]))}}),ot=O(it,[["__scopeId","data-v-83778539"]]),nt={class:"p-4 bg-white dark:bg-[var(--dark-background)] rounded-xl border border-sidebar-border/70 flex flex-col items-center gap-2",style:{"min-height":"160px"}},lt={class:"text-center mb-2"},dt={class:"text-2xl font-bold text-gray-900 dark:text-white"},ut={class:"w-full h-32 md:h-36"},ct=P({__name:"MessagesSparkline",props:{data:{type:Array,required:!0},totalMessages:{type:Number,required:!0}},setup(e){_.register(se,ie,G,oe,ne,H,Be);const a=e,t=m(null);let r=null;const s=m({labels:[],datasets:[{data:[],borderColor:"#4D4D4D",backgroundColor:"rgba(77,77,77,0.1)",fill:!0,tension:.4,pointRadius:2}]}),i={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{enabled:!0}},scales:{x:{display:!0,ticks:{color:"#4D4D4D",font:{size:12}},grid:{display:!1}},y:{display:!1,beginAtZero:!0}}},o=()=>{!t.value||!a.data?.length||(r?(r.data=s.value,r.update()):r=new _(t.value,{type:"line",data:s.value,options:i}))};return M(()=>a.data,n=>{!n||!n.length||(s.value.labels=n.map(l=>{const d=new Date(l.date);return`${d.getDate()}/${d.getMonth()+1}`}),s.value.datasets[0].data=n.map(l=>l.count),o())},{immediate:!0}),xe(()=>{r&&(r.destroy(),r=null)}),$(()=>o()),(n,l)=>(y(),p("div",nt,[f("div",lt,[l[0]||(l[0]=f("p",{class:"text-gray-500 dark:text-gray-400 text-sm"},"Messages reçus (7 derniers jours)",-1)),f("h3",dt,me(e.totalMessages),1)]),f("div",ut,[f("canvas",{ref_key:"chartRef",ref:t},null,512)])]))}}),ft=O(ct,[["__scopeId","data-v-f14905dd"]]),vt={class:"h-full p-4 flex flex-col"},ht={class:"flex-1 min-h-[260px]"},bt={key:1,class:"h-72 flex items-center justify-center text-gray-500 dark:text-gray-400"},pt=P({__name:"UsersLineChart",props:{data:{type:Array,required:!0}},setup(e){_.register(re,H,ae,ie,G,se,ne,oe,N);const a=e,t=m(null);let r=null;const s=m({labels:[],datasets:[{label:"Utilisateurs",data:[],borderColor:"#6997ee",backgroundColor:"rgba(105, 151, 238, 0.2)",fill:!0,tension:.3,pointRadius:4,pointBackgroundColor:"#6997ee"}]}),i={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{font:{size:14}}},tooltip:{callbacks:{label:n=>`${n.parsed.y} utilisateurs`}},datalabels:{display:!1}},scales:{x:{title:{display:!0,text:"Date"}},y:{title:{display:!0,text:"Nombre d’utilisateurs"},beginAtZero:!0}}},o=()=>{t.value&&(r?(r.data=s.value,r.update()):r=new _(t.value,{type:"line",data:s.value,options:i,plugins:[N]}))};return M(()=>a.data,n=>{if(!n.length){s.value.labels=[],s.value.datasets[0].data=[],o();return}s.value.labels=n.map(l=>l.date),s.value.datasets[0].data=n.map(l=>Number(l.count)),o()},{immediate:!0}),$(()=>o()),(n,l)=>(y(),p("div",vt,[l[0]||(l[0]=f("h3",{class:"text-lg font-semibold mb-3"},"Évolution du nombre d’utilisateurs",-1)),f("div",ht,[s.value.labels.length?(y(),p("canvas",{key:0,ref_key:"chartRef",ref:t,class:"w-full h-full"},null,512)):(y(),p("div",bt," Aucune donnée disponible "))])]))}}),yt=O(pt,[["__scopeId","data-v-650850e4"]]),_t={class:"p-4 bg-white dark:bg-[var(--dark-background)] rounded shadow overflow-x-auto"},xt={class:"w-full min-w-[400px]",style:{"min-height":"300px"}},mt=P({__name:"ClicksByWeekdayChart",props:{data:{type:Array,default:()=>[]}},setup(e){_.register(...Z);const a=e,t=m(null);let r=null;const s=()=>{const l=[];for(let d=6;d>=0;d--)l.push(V().subtract(d,"day").format("DD/MM"));return l},i=l=>{const d=Array.isArray(l)?l:Object.values(l);return s().map(c=>{const b=d.find(E=>V(E.date).format("DD/MM")===c);return b?b.count:0})};function o(){if(!t.value)return;const l=s(),d=i(a.data);r=new _(t.value,{type:"bar",data:{labels:l,datasets:[{label:'Clics "Commander"',data:d,backgroundColor:"rgba(59, 130, 246, 0.7)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}},x:{ticks:{autoSkip:!1}}}}})}function n(){r?.resize()}return $(()=>{o(),window.addEventListener("resize",n)}),M(()=>a.data,l=>{r&&(r.data.datasets[0].data=i(l),r.update())},{deep:!0}),Q(()=>{window.removeEventListener("resize",n),r?.destroy()}),(l,d)=>(y(),p("div",_t,[d[0]||(d[0]=f("h3",{class:"text-lg font-semibold mb-3 text-text-dark dark:text-dark-white"}," Jour le plus actif (clics “Commander”) ",-1)),f("div",xt,[f("canvas",{ref_key:"chartCanvas",ref:t},null,512)])]))}}),gt={class:"p-4 bg-white dark:bg-[var(--dark-background)] rounded-xl shadow-md border border-sidebar-border/70 flex flex-col"},kt={key:0,class:"flex-1 flex items-center justify-center text-gray-400 text-sm"},wt={key:1,class:"flex-1 relative min-h-[260px]"},Ct={__name:"OrdersByProductChart",props:{data:{type:Array,default:()=>[]}},setup(e){_.register(...Z);const a=e,t=m(null);let r=null;function s(){!t.value||!a.data.length||(r&&r.destroy(),r=new _(t.value,{type:"bar",data:{labels:a.data.map(i=>i.name),datasets:[{label:'Clics sur "Commander"',data:a.data.map(i=>i.count),backgroundColor:"rgba(59, 130, 246, 0.7)",borderColor:"rgba(37, 99, 235, 1)",borderWidth:1,borderRadius:8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0,0,0,0.8)",titleFont:{size:14,weight:"bold"},bodyFont:{size:13}}},scales:{x:{ticks:{color:"#6B7280",font:{size:12},maxRotation:40,minRotation:20},grid:{display:!1}},y:{beginAtZero:!0,ticks:{color:"#6B7280",font:{size:12},stepSize:1},grid:{color:"rgba(0,0,0,0.05)"}}}}}))}return $(()=>s()),M(()=>a.data,()=>{s()},{deep:!0}),Q(()=>{r&&r.destroy()}),(i,o)=>(y(),p("div",gt,[o[0]||(o[0]=f("h3",{class:"text-lg font-semibold mb-3 text-gray-800 dark:text-gray-200 text-center"}," Produits les plus commandés ",-1)),e.data.length?(y(),p("div",wt,[f("canvas",{ref_key:"chartCanvas",ref:t,class:"absolute inset-0 w-full h-full"},null,512)])):(y(),p("div",kt," Aucune donnée à afficher pour le moment. "))]))}},Mt={class:"p-4 dark:bg-dark-background rounded-xl shadow"},$t={class:"h-72"},At={__name:"OrdersByMonthChart",props:{data:{type:Array,default:()=>[]}},setup(e){_.register(...Z);const a=e,t=m(null);let r=null;function s(){t.value&&(r&&r.destroy(),r=new _(t.value,{type:"bar",data:{labels:a.data.map(i=>i.month),datasets:[{label:'Nombre de clics sur "Commander"',data:a.data.map(i=>i.count),backgroundColor:"rgba(59, 130, 246, 0.7)",borderColor:"rgba(59, 130, 246, 1)",borderWidth:1.5,borderRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:i=>`${i.parsed.y} clic(s)`}}},scales:{x:{ticks:{color:"#6b7280",maxRotation:0,minRotation:0},grid:{display:!1}},y:{beginAtZero:!0,ticks:{stepSize:1,color:"#6b7280"},grid:{color:"rgba(0,0,0,0.05)"}}}}}))}return $(s),M(()=>a.data,()=>{s()},{deep:!0}),(i,o)=>(y(),p("div",Mt,[o[0]||(o[0]=f("h3",{class:"text-lg font-semibold mb-4 text-gray-700 dark:text-gray-200"},' Évolution des clics sur "Commander" par mois ',-1)),f("div",$t,[f("canvas",{ref_key:"chartCanvas",ref:t},null,512)])]))}},Rt=O(At,[["__scopeId","data-v-186b152b"]]),Dt={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},It={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},St={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border bg-white dark:bg-[var(--dark-background)]",style:{"min-height":"320px"}},Pt={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border bg-white dark:bg-[var(--dark-background)]",style:{"min-height":"320px","max-height":"400px"}},Et={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border bg-white dark:bg-[var(--dark-background)]",style:{"min-height":"320px","max-height":"400px"}},Bt={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},zt={class:"relative rounded-xl border border-sidebar-border/70 dark:border-sidebar-border bg-white dark:bg-[var(--dark-background)]"},Tt={class:"w-full aspect-video"},jt={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border bg-white dark:bg-[var(--dark-background)]",style:{"min-height":"320px","max-height":"400px"}},Lt={class:"relative overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border bg-white dark:bg-[var(--dark-background)]",style:{"min-height":"320px","max-height":"400px"}},Kt=P({__name:"Administrateur",setup(e){const a=ge();g(()=>a.props.notifications||[]);const t=g(()=>a.props.products_by_category||[]),r=g(()=>a.props.users_over_time||[]),s=g(()=>a.props.last7Days||[]),i=g(()=>a.props.total_messages||0),o=g(()=>a.props.orders_by_product||[]),n=g(()=>a.props.orders_by_month||[]),l=g(()=>a.props.clicks_last_7_days||[]),d=[{title:"Dashboard Administrateur",href:_e().url}];return(u,c)=>(y(),p(Me,null,[k(ke(we),{title:"Dashboard Administrateur"}),k(ye,{breadcrumbs:d},{default:Ce(()=>[f("div",Dt,[f("div",It,[f("div",St,[k(ot,{data:t.value},null,8,["data"])]),f("div",Pt,[k(yt,{data:r.value},null,8,["data"])]),f("div",Et,[k(ft,{data:s.value,totalMessages:i.value},null,8,["data","totalMessages"])])]),f("div",Bt,[f("div",zt,[f("div",Tt,[k(Ct,{data:o.value},null,8,["data"])])]),f("div",jt,[k(Rt,{data:n.value},null,8,["data"])]),f("div",Lt,[k(mt,{data:l.value},null,8,["data"])])]),c[0]||(c[0]=f("div",{class:"relative min-h-[40vh] flex-1 rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border"},[f("p",{class:"text-center p-4 text-gray-500"},"Zone d'activité / autres graphiques")],-1))])]),_:1})],64))}});export{Kt as default};
