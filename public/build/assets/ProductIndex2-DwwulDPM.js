import{B as N,C as z,D as P,r as c,g as j,x as T,c as n,a as r,j as u,k as w,e as a,b as i,l as O,v as W,y as d,F as m,p as k,t as h,E as D,w as p,o,z as V,H as E}from"./app-Cq7MTbjo.js";import{d as C}from"./index-CglwCT64.js";import{L as H,S as R,A as U,a as J,b as q,_ as G}from"./Loading-D-lOC9dM.js";import{T as K,N as Q,L as X,_ as Y}from"./LoginReminder-C50HgyuZ.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{F as ee}from"./FloatingAction-C2hHJDdC.js";import{P as te,M as ae,_ as re,a as se}from"./HeroSection-CGp4oyg6.js";import{F as oe}from"./FlashMessageFrontend-c1nk1IDq.js";import{C as ne}from"./CartWidget-IrbUP2pg.js";import"./index-CpRFnG9C.js";import"./createLucideIcon-BhLKPZUj.js";const ie={class:"dark:bg-dark-background dark:text-dark-white bg-background-light text-text-dark p-8 transition-colors duration-300"},le={class:"mb-6 flex justify-center"},de={class:"flex gap-3 justify-start mb-4 overflow-x-auto whitespace-nowrap px-2"},ce=["onClick"],ue={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"},me={class:"overflow-hidden rounded"},fe=["src","alt"],ve=["src","alt"],ge={class:"p-3 flex flex-col flex-1"},ke={class:"text-sm font-medium truncate mt-2"},he={class:"mt-auto flex justify-between items-center p-3"},pe=["onClick"],xe=["onClick"],ye={class:"ml-1 text-sm dark:text-[var(--dark-grey)]"},be={key:0,class:"text-center mt-6 text-gray-500 dark:text-dark-grey"},_e={__name:"ProductIndex2",props:{products:Array,categories:Array,filters:Object,auth:Object,seo:Object},setup(x){N.add(z,P);const f=x,y=c(f.filters.search||""),v=c(f.filters.category||""),g=c(!1),b=c(!0),A=j(()=>window.innerWidth>=1024?20:window.innerWidth>=768?12:window.innerWidth>=640?8:4);let $=null;T(()=>{g.value=localStorage.getItem("darkMode")==="true";const t=localStorage.getItem("cart");t&&(cart.value=JSON.parse(t)),b.value=!1});const S=j(()=>f.products.filter(t=>{const s=t.title.toLowerCase().includes(y.value.toLowerCase()),e=v.value===""||t.category_id===v.value;return s&&e}));function B(t){if(!f.auth?.user){confirm(`Vous devez être connecté pour aimer un produit.
Voulez-vous vous connecter maintenant ?`)&&(window.location.href="/login");return}E.post(`/like/${t.id}`).then(s=>{t.liked=s.data.liked,t.likes_count=s.data.likesCount}).catch(()=>{})}function F(t){return["border-none",v.value===t?"underline text-[var(--accent-cyan)]":"text-text-dark hover:text-[var(--accent-cyan)]"]}function I(t){v.value=t}function M(){clearTimeout($),$=setTimeout(()=>{},300)}function L(t){return t?`/${t}`:"/fallback.png"}const _=c(!0);return T(()=>{sessionStorage.getItem("hasVisited")?_.value=!1:setTimeout(async()=>{_.value=!1,await nextTick(),sessionStorage.setItem("hasVisited","true")},2e3)}),(t,s)=>(o(),n(m,null,[r(i(C.Head),{title:x.seo.title},null,8,["title"]),_.value?(o(),u(H,{key:0})):w("",!0),r(K),r(Q,{auth:t.$page.props.auth,class:"mt-10 md:mt-12"},null,8,["auth"]),t.$page.props.flash?.message?(o(),u(oe,{key:1,message:t.$page.props.flash.message,link:t.$page.props.flash.link},null,8,["message","link"])):w("",!0),r(ee),a("section",null,[a("div",ie,[a("div",le,[O(a("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>y.value=e),onInput:M,type:"text",placeholder:"Rechercher un produit...",class:d([g.value?"border-dark-grey bg-dark-background text-dark-white placeholder-dark-grey focus:ring-dark-accent":"border-text-secondary bg-background-light text-text-dark placeholder-text-secondary focus:ring-accent-cyan","border rounded px-3 py-1 w-full max-w-md focus:outline-none focus:ring-2 transition-colors duration-300"])},null,34),[[W,y.value]])]),a("div",de,[a("span",{onClick:s[1]||(s[1]=e=>I("")),class:d([F(""),"inline-block cursor-pointer px-4 py-2 text-sm font-medium transition-colors duration-300 dark:text-[var(--dark-grey)]"])}," Tous ",2),(o(!0),n(m,null,k(x.categories,e=>(o(),n("span",{key:e.id,onClick:l=>I(e.id),class:d([F(e.id),"inline-block cursor-pointer px-4 py-2 text-sm font-medium transition-colors duration-300 text-[var(--dark-blue)] dark:text-[var(--dark-grey)]"])},h(e.name),11,ce))),128))]),s[3]||(s[3]=a("hr",{class:"border-t border-gray-300 dark:border-[var(--dark-grey)] mb-6"},null,-1)),a("div",ue,[b.value?(o(!0),n(m,{key:0},k(A.value,e=>(o(),n("div",{key:e,class:"product-card rounded flex flex-col shadow-md overflow-hidden"},[...s[2]||(s[2]=[D('<div class="h-40 w-full rounded mb-3 skeleton" data-v-0cb90d72></div><div class="p-3 flex flex-col flex-1" data-v-0cb90d72><div class="h-4 rounded w-3/4 mb-2 skeleton" data-v-0cb90d72></div><div class="h-3 rounded w-1/2 skeleton" data-v-0cb90d72></div></div><div class="mt-auto flex justify-between items-center p-3" data-v-0cb90d72><div class="h-6 w-6 rounded-full skeleton" data-v-0cb90d72></div><div class="h-6 w-6 rounded-full skeleton" data-v-0cb90d72></div></div>',3)])]))),128)):(o(!0),n(m,{key:1},k(S.value,e=>(o(),n("div",{key:e.id,class:d(["product-card rounded flex flex-col transition-transform duration-300 hover:scale-105",g.value?"bg-[var(--dark-background)] shadow-md border border-[var(--dark-grey)]":"bg-background-light shadow-md"])},[a("div",me,[e.images.length>1?(o(),u(i(J),{key:0,modules:[i(U),i(te)],autoplay:{delay:3e3},pagination:"",loop:""},{default:p(()=>[(o(!0),n(m,null,k(e.images,l=>(o(),u(i(R),{key:l.id},{default:p(()=>[r(i(C.Link),{href:`/products/${e.slug}`,prefetch:"intent",class:"hover:underline"},{default:p(()=>[a("img",{src:L(l.url_image),alt:e.title,loading:"lazy",class:"w-full h-40 object-cover transition-transform duration-300 hover:scale-110 rounded"},null,8,fe)]),_:2},1032,["href"])]),_:2},1024))),128))]),_:2},1032,["modules"])):(o(),u(i(C.Link),{key:1,href:`/products/${e.slug}`,prefetch:"intent",class:"hover:underline"},{default:p(()=>[a("img",{src:L(e.images[0]?.url_image),alt:e.title,loading:"lazy",class:"w-full h-40 object-cover transition-transform duration-300 hover:scale-110 rounded"},null,8,ve)]),_:2},1032,["href"]))]),a("div",ge,[a("h3",ke,h(e.title),1),a("p",{class:d(["text-sm font-semibold mt-2",g.value?"text-dark-white":"text-text-dark"])},h(e.prix)+" FCFA ",3)]),a("div",he,[a("button",{onClick:l=>t.addToCart(e,l),class:"transition-transform duration-200 hover:scale-125 active:scale-90 text-[var(--accent-cyan)] dark:text-white"},[r(i(V),{icon:["fas","cart-shopping"]})],8,pe),a("button",{onClick:l=>B(e),class:d(["transition-transform duration-200 hover:scale-125 active:scale-90",e.liked?"text-red-500":"text-[var(--accent-cyan)]"])},[r(i(V),{icon:["far","heart"]}),a("span",ye,h(e.likes_count),1)],10,xe)])],2))),128))]),!b.value&&S.value.length===0?(o(),n("div",be," Aucun produit trouvé ")):w("",!0),r(ne)])]),r(ae),r(re),r(q),r(se),r(G),r(X),r(Y)],64))}},Be=Z(_e,[["__scopeId","data-v-0cb90d72"]]);export{Be as default};
