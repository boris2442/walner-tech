import{B as E,C as q,D as H,r as c,g as z,x as U,c as n,a as s,j as h,k as p,e as o,b as l,h as G,l as J,v as K,z as F,y as k,F as m,p as w,t as b,E as Q,w as C,o as r,m as L,G as X,A as T,H as Y}from"./app-Cq7MTbjo.js";import{C as A,c as Z}from"./CartWidget-IrbUP2pg.js";import{T as ee,N as te,L as ae,_ as se}from"./LoginReminder-C50HgyuZ.js";import{F as oe}from"./FlashMessageFrontend-c1nk1IDq.js";import{L as re,S as ne,A as le,a as ie,b as de,_ as ce}from"./Loading-D-lOC9dM.js";import{F as ue}from"./FloatingAction-C2hHJDdC.js";import{P as fe,M as me,_ as ve,a as ge}from"./HeroSection-CGp4oyg6.js";import{F as he}from"./FlashMessageNewsletter-ooseNUwg.js";import{_ as pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-BhLKPZUj.js";import"./index-CpRFnG9C.js";import"./index-CglwCT64.js";const ke={class:"dark:bg-dark-background dark:text-dark-white bg-background-light text-text-dark p-8 transition-colors duration-300"},xe={class:"relative w-full max-w-md mx-auto"},ye={class:"flex gap-3 justify-start mb-4 overflow-x-auto whitespace-nowrap px-2"},_e=["onClick"],we={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4"},be={class:"overflow-hidden rounded"},Ce=["src","alt"],Se=["src","alt"],$e={class:"p-3 flex flex-col flex-1"},Fe={class:"text-sm font-medium truncate mt-2"},Ve={class:"mt-auto flex justify-between items-center p-3"},je=["onClick"],Be=["onClick"],Ie={class:"ml-1 text-sm dark:text-[var(--dark-grey)]"},ze={key:0,class:"text-center mt-6 text-gray-500 dark:text-dark-grey"},Le=["src"],Te={__name:"ProductIndex",props:{products:Array,categories:Array,filters:Object,auth:Object,seo:Object},setup(S){E.add(q,H);const v=S,g=c(v.filters.search||""),x=c(v.filters.category||""),$=c(!1),u=c(!0),y=c(!0),M=c([]),N=z(()=>window.innerWidth>=1024?20:window.innerWidth>=768?12:window.innerWidth>=640?8:4),d=c({show:!1,src:"",x:0,y:0,dx:0,dy:0});U(()=>{const t=localStorage.getItem("cart");t&&(M.value=JSON.parse(t)),$.value=localStorage.getItem("darkMode")==="true",sessionStorage.getItem("hasVisited")?(y.value=!1,u.value=!0,setTimeout(()=>{u.value=!1},1e3)):(y.value=!0,u.value=!0,setTimeout(()=>{y.value=!1,setTimeout(()=>{u.value=!1},1e3)},2e3),sessionStorage.setItem("hasVisited","true"))});const V=z(()=>v.products.filter(t=>{const a=t.title.toLowerCase().includes(g.value.toLowerCase()),e=x.value===""||t.category_id===x.value;return a&&e}));function R(t){if(!v.auth?.user){confirm(`Vous devez être connecté pour aimer un produit.
Voulez-vous vous connecter maintenant ?`)&&T.visit("/login");return}Y.post(`/like/${t.id}`).then(a=>{t.liked=a.data.liked,t.likes_count=a.data.likesCount}).catch(()=>{})}function j(t){return["border-none",x.value===t?"underline text-[var(--accent-cyan)]":"text-text-dark hover:text-[var(--accent-cyan)]"]}function B(t){x.value=t}function P(){}function O(t,a){if(!v.auth?.user){confirm(`Vous devez être connecté pour ajouter un produit au panier.
Voulez-vous vous connecter maintenant ?`)&&T.visit("/login");return}const e=t.currentTarget.closest(".product-card").querySelector("img"),i=document.querySelector(".fixed.bottom-6.right-6 button");if(!e||!i)return;const f=e.getBoundingClientRect(),_=i.getBoundingClientRect(),W=_.left+_.width/2-(f.left+f.width/2),D=_.top+_.height/2-(f.top+f.height/2);d.value={show:!0,src:e.src,x:f.left,y:f.top,dx:W,dy:D},Z.add(a),setTimeout(()=>{d.value.show=!1},800)}function I(t){return t?`/${t}`:"/fallback.png"}return(t,a)=>(r(),n(m,null,[s(l(G),{title:S.seo.title},null,8,["title"]),y.value?(r(),h(re,{key:0})):p("",!0),s(ee),s(te,{auth:t.$page.props.auth,class:"mt-10 md:mt-12"},null,8,["auth"]),t.$page.props.flash?.message?(r(),h(oe,{key:1,message:t.$page.props.flash.message,link:t.$page.props.flash.link},null,8,["message","link"])):p("",!0),s(ue),s(he),o("section",null,[o("div",ke,[o("div",xe,[J(o("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>g.value=e),onInput:P,type:"text",placeholder:"Rechercher un produit...",class:"custom-input"},null,544),[[K,g.value]]),s(l(F),{icon:"magnifying-glass",class:"custom-icon"}),g.value?(r(),n("button",{key:0,onClick:a[1]||(a[1]=e=>g.value=""),type:"button",class:"clear-btn"}," ✕ ")):p("",!0)]),o("div",ye,[o("span",{onClick:a[2]||(a[2]=e=>B("")),class:k([j(""),"inline-block cursor-pointer px-4 py-2 text-sm font-medium transition-colors duration-300 dark:text-[var(--dark-grey)]"])},"Tous",2),(r(!0),n(m,null,w(S.categories,e=>(r(),n("span",{key:e.id,onClick:i=>B(e.id),class:k([j(e.id),"inline-block cursor-pointer px-4 py-2 text-sm font-medium transition-colors duration-300 text-[var(--dark-blue)] dark:text-[var(--dark-grey)]"])},b(e.name),11,_e))),128))]),a[4]||(a[4]=o("hr",{class:"border-t border-gray-300 dark:border-[var(--dark-grey)] mb-6"},null,-1)),o("div",we,[u.value?(r(!0),n(m,{key:0},w(N.value,e=>(r(),n("div",{key:e,class:"product-card rounded flex flex-col shadow-md overflow-hidden"},[...a[3]||(a[3]=[Q('<div class="h-40 w-full rounded mb-3 skeleton" data-v-c4f997dc></div><div class="p-3 flex flex-col flex-1" data-v-c4f997dc><div class="h-4 rounded w-3/4 mb-2 skeleton" data-v-c4f997dc></div><div class="h-3 rounded w-1/2 skeleton" data-v-c4f997dc></div></div><div class="mt-auto flex justify-between items-center p-3" data-v-c4f997dc><div class="h-6 w-6 rounded-full skeleton" data-v-c4f997dc></div><div class="h-6 w-6 rounded-full skeleton" data-v-c4f997dc></div></div>',3)])]))),128)):(r(),n(m,{key:1},[(r(!0),n(m,null,w(V.value,e=>(r(),n("div",{key:e.id,class:k(["product-card rounded flex flex-col transition-transform duration-300 hover:scale-105",$.value?"bg-[var(--dark-background)] shadow-md border border-[var(--dark-grey)]":"bg-background-light shadow-md"])},[o("div",be,[e.images.length>1?(r(),h(l(ie),{key:0,modules:[l(le),l(fe)],autoplay:{delay:3e3},pagination:"",loop:""},{default:C(()=>[(r(!0),n(m,null,w(e.images,i=>(r(),h(l(ne),{key:i.id},{default:C(()=>[s(l(L),{href:`/products/${e.slug}`,prefetch:"",class:"hover:underline"},{default:C(()=>[o("img",{src:I(i.url_image),alt:e.title,loading:"lazy",class:"w-full h-40 object-cover transition-transform duration-300 hover:scale-110 rounded"},null,8,Ce)]),_:2},1032,["href"])]),_:2},1024))),128))]),_:2},1032,["modules"])):(r(),h(l(L),{key:1,href:`/products/${e.slug}`,prefetch:"",class:"hover:underline"},{default:C(()=>[o("img",{src:I(e.images[0]?.url_image),alt:e.title,loading:"lazy",class:"w-full h-40 object-cover transition-transform duration-300 hover:scale-110 rounded"},null,8,Se)]),_:2},1032,["href"]))]),o("div",$e,[o("h3",Fe,b(e.title),1),o("p",{class:k(["text-sm font-semibold mt-2",$.value?"text-dark-white":"text-text-dark"])},b(e.prix)+" FCFA",3)]),o("div",Ve,[o("button",{onClick:i=>O(i,e),"aria-label":"Bouton ajout au panier",title:"ajout au panier",class:"transition-transform duration-200 hover:scale-125 active:scale-90 text-[var(--accent-cyan)] dark:text-white"},[s(l(F),{icon:["fas","cart-shopping"]})],8,je),o("button",{onClick:i=>R(e),"aria-label":"Bouton liker le produit",title:"Liker le produit",class:k(["transition-transform duration-200 hover:scale-125 active:scale-90",e.liked?"text-red-500":"text-[var(--accent-cyan)]"])},[s(l(F),{icon:["far","heart"]}),o("span",Ie,b(e.likes_count),1)],10,Be)])],2))),128)),s(A)],64))]),!u.value&&V.value.length===0?(r(),n("div",ze," Aucun produit trouvé ")):p("",!0),s(A)])]),s(me),s(ve),s(de),s(ge),s(ce),s(ae),s(se),d.value.show?(r(),n("img",{key:2,src:d.value.src,style:X({top:d.value.y+"px",left:d.value.x+"px",transform:"translate("+d.value.dx+"px,"+d.value.dy+"px) scale(0.2)",transition:"transform 0.8s ease-in-out, opacity 0.8s ease-in-out",opacity:1}),class:"fixed w-20 h-20 rounded-lg pointer-events-none z-50"},null,12,Le)):p("",!0)],64))}},Ge=pe(Te,[["__scopeId","data-v-c4f997dc"]]);export{Ge as default};
