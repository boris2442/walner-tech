import{d as I,y as h,c as V,a as n,f as $,g as p,e as c,u as m,h as S,w as g,b as e,t as r,G as x,H as A,o as i,A as T,j as D,F as v,z as _,J as E,I as k}from"./app-BY6Jg-lY.js";import{_ as F}from"./AppLayout.vue_vue_type_script_setup_true_lang-hFn4Y0Ha.js";import{d as M}from"./dayjs.min-CvzSeAXD.js";import{F as N}from"./FlashMessageFrontend-DREMuSC0.js";import{T as B}from"./trash-2-DyamU0ci.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BXWHhu0U.js";import"./useForwardExpose-u2d8Qz6Q.js";import"./VisuallyHidden-CJoAU5KM.js";import"./RovingFocusGroup-BTFIkWcn.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BdvXPHPK.js";import"./createLucideIcon-DMCzuMSJ.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CO2OEQiq.js";const j={class:"flex flex-col gap-4 p-4 overflow-x-auto"},z={class:"grid gap-4 grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4"},H={class:"kpi-card"},R={class:"kpi-text"},G={class:"kpi-card"},J={class:"kpi-text"},O={class:"kpi-card"},q={class:"kpi-text"},K={class:"kpi-card"},P={class:"kpi-text"},Q={class:"kpi-card"},W={class:"kpi-text"},X={class:"relative rounded-xl border border-sidebar-border/70 dark:border-sidebar-border min-h-[50vh]"},Z={class:"flex flex-col md:flex-row gap-2 md:gap-4 mb-4 p-2"},ee={class:"relative"},se={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border rounded shadow-lg z-50"},te={class:"overflow-x-auto"},oe={class:"w-full text-left border-collapse text-[0.75rem] sm:text-[0.75rem] md:text-[0.875rem] lg:text-[0.875rem]"},re={class:"p-2 truncate max-w-[150px]"},le={class:"p-2"},ae={class:"p-2"},ie={class:"p-2"},de=["onUpdate:modelValue","onChange"],ne=["value"],ue={class:"p-2"},ce={class:"p-2 flex gap-2"},pe=["onClick"],me={key:0},ve=I({__name:"UserIndex",props:{stats:{},users:{},filters:{},roles:{}},setup(b){const l=b,w=[{title:"Users",href:"/admin/users"}],d=h(l.filters.search||""),f=V(()=>d.value?l.users.data.filter(t=>(t.name??"").toLowerCase().includes(d.value.toLowerCase())||(t.phone??"").toLowerCase().includes(d.value.toLowerCase())||(t.role??"").toLowerCase().includes(d.value.toLowerCase())||(t.email??"").toLowerCase().includes(d.value.toLowerCase())):l.users.data);function y(t){return M(t).format("DD/MM/YYYY HH:mm")}const u=h(!1);function C(t){t.target.closest(".relative")||(u.value=!1)}document.addEventListener("click",C);const U=t=>{confirm("Voulez-vous vraiment supprimer cette cat√©gorie ?")&&k.Inertia.delete(`/admin/users/${t}`,{onSuccess:()=>{},preserveScroll:!0})};function L(t,s){k.Inertia.put(`/admin/users/${t}/role`,{role:s},{preserveScroll:!0,onSuccess:()=>{},onError:o=>{}})}return(t,s)=>(i(),n(v,null,[t.$page.props.flash?.message?(i(),$(N,{key:0,message:t.$page.props.flash.message,link:t.$page.props.flash.link},null,8,["message","link"])):p("",!0),c(m(S),{title:"Users"}),c(F,{breadcrumbs:w},{default:g(()=>[e("div",j,[e("div",z,[e("div",H,[s[3]||(s[3]=e("div",{class:"kpi-icon"},"üë•",-1)),e("div",R,[s[2]||(s[2]=e("h3",null,"Total Utilisateurs",-1)),e("p",null,r(l.stats.total),1)])]),e("div",G,[s[5]||(s[5]=e("div",{class:"kpi-icon"},"üÜï",-1)),e("div",J,[s[4]||(s[4]=e("h3",null,"Inscrits Aujourd'hui",-1)),e("p",null,r(l.stats.today),1)])]),e("div",O,[s[7]||(s[7]=e("div",{class:"kpi-icon"},"üõ°Ô∏è",-1)),e("div",q,[s[6]||(s[6]=e("h3",null,"Administrateurs",-1)),e("p",null,r(l.stats.admins),1)])]),e("div",K,[s[9]||(s[9]=e("div",{class:"kpi-icon"},"üë§",-1)),e("div",P,[s[8]||(s[8]=e("h3",null,"Utilisateurs",-1)),e("p",null,r(l.stats.clients),1)])]),e("div",Q,[s[11]||(s[11]=e("div",{class:"kpi-icon"},"üë§",-1)),e("div",W,[s[10]||(s[10]=e("h3",null,"Inscrit cette semaine",-1)),e("p",null,r(l.stats.week),1)])])]),e("div",X,[e("div",Z,[x(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>d.value=o),placeholder:"Rechercher par nom ou contact ou email",class:"border p-2 rounded flex-1 text-xs sm:text-sm md:text-base"},null,512),[[A,d.value]]),e("div",ee,[e("button",{onClick:s[1]||(s[1]=o=>u.value=!u.value),class:"p-2 border rounded hover:bg-gray-100 dark:hover:bg-gray-700"}," ‚ãÆ "),u.value?(i(),n("div",se,[e("ul",null,[e("li",null,[c(m(T),{href:"/admin/users/create",class:"block w-full text-left px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm"},{default:g(()=>[...s[12]||(s[12]=[D(" Cr√©er un utilisateur ",-1)])]),_:1})])])])):p("",!0)])]),e("div",te,[e("table",oe,[s[14]||(s[14]=e("thead",null,[e("tr",{class:"border-b"},[e("th",{class:"p-2"},"Nom"),e("th",{class:"p-2"},"Email"),e("th",{class:"p-2"},"T√©l√©phone"),e("th",{class:"p-2"},"R√¥le"),e("th",{class:"p-2"},"Cr√©√© le"),e("th",{class:"p-2"},"Actions")])],-1)),e("tbody",null,[(i(!0),n(v,null,_(f.value,o=>(i(),n("tr",{key:o.id,class:"border-b hover:bg-gray-100 dark:hover:bg-gray-700"},[e("td",re,r(o.name),1),e("td",le,r(o.email),1),e("td",ae,r(o.phone),1),e("td",ie,[x(e("select",{"onUpdate:modelValue":a=>o.role=a,onChange:a=>L(o.id,a.target.value),class:"border rounded px-2 py-1 text-sm"},[(i(!0),n(v,null,_(l.roles,a=>(i(),n("option",{key:a,value:a},r(a),9,ne))),128))],40,de),[[E,o.role]])]),e("td",ue,r(y(o.created_at)),1),e("td",ce,[e("button",{class:"text-red-500 hover:text-red-700",title:"Supprimer",onClick:a=>U(o.id)},[c(m(B),{class:"w-4 h-4 md:w-5 md:h-5"})],8,pe)])]))),128)),f.value.length===0?(i(),n("tr",me,[...s[13]||(s[13]=[e("td",{colspan:"7",class:"text-center p-4 text-gray-500"}," Aucun utilisateur trouv√© ",-1)])])):p("",!0)])])])])])]),_:1})],64))}}),$e=Y(ve,[["__scopeId","data-v-1c5dd6b2"]]);export{$e as default};
