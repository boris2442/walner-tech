import{d as w,L as V,r as C,c as l,b as d,u as t,e as P,f as j,k as s,E as $,j as u,l as i,m as n,O as F,F as m,q as f,R as U,p as b}from"./app-BiLXB_Gm.js";import{_ as c}from"./Input-BlLIRTr1.js";import{_ as A,a as B}from"./SubmitButton-CXAYjg5R.js";import{_ as E}from"./BackButton-CzwGPDa-.js";import{p as x,_ as S}from"./AppLayout.vue_vue_type_script_setup_true_lang-G5aJeSxS.js";import{d as I}from"./index-BdvXPHPK.js";import"./index-uZ0nkAcw.js";import"./useForwardExpose-D7JHDv8x.js";import"./VisuallyHidden-DjQmEh-o.js";import"./RovingFocusGroup-nIneY0yw.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CO70Gl9y.js";const L={class:"flex flex-col gap-4 p-4"},M={class:"relative min-h-[80vh] flex-1 rounded-xl border border-sidebar-border/70 p-6 dark:border-sidebar-border"},N={key:0,class:"text-sm"},D={key:1,class:"text-sm"},G={key:2,class:"text-sm"},q=["value"],z={key:0,class:"mt-1 text-sm text-red-500"},R={class:"mt-2 flex flex-wrap gap-2"},O=["src"],T=["onClick"],J={key:0,class:"mt-1 text-sm text-red-500"},le=w({__name:"ProductCreate",props:{categories:Array},setup(v){const k=[{title:"dashboard",href:I().url},{title:"Products List",href:x.index().url},{title:"Products create",href:x.create().url}],e=V({title:"",description:"",prix:"",stock:0,category_id:"",status:"disponible",images:[]}),p=C([]),y=()=>{const a=new FormData;a.append("title",e.title),a.append("description",e.description),a.append("prix",e.prix),a.append("stock",e.stock),a.append("category_id",e.category_id),a.append("status",e.status),e.images.forEach(r=>a.append("images[]",r)),e.post("/admin/products/store",{onSuccess:()=>{e.reset(),p.value=[]},onError:r=>{}})},_=a=>{const r=a.target;r.files&&(e.images=Array.from(r.files),p.value=e.images.map(o=>URL.createObjectURL(o)))},h=a=>{e.images.splice(a,1),p.value.splice(a,1)};return(a,r)=>(i(),l(m,null,[d(t(P),{title:"Créer un Produit"}),d(S,{breadcrumbs:k},{default:j(()=>[s("div",L,[d(E,{class:"m-4"}),s("div",M,[r[11]||(r[11]=s("h1",{class:"mb-4 text-xl font-bold text-[var(--primary-blue)] dark:text-[var(--dark-gold)]"},"Ajouter un Produit",-1)),s("form",{onSubmit:$(y,["prevent"]),enctype:"multipart/form-data",class:"flex flex-col gap-4"},[d(c,{label:"Titre du produit",modelValue:t(e).title,"onUpdate:modelValue":r[0]||(r[0]=o=>t(e).title=o),error:t(e).errors.title},null,8,["modelValue","error"]),t(e).errors.title?(i(),l("span",N,n(t(e).errors.title),1)):u("",!0),d(A,{label:"Description",modelValue:t(e).description,"onUpdate:modelValue":r[1]||(r[1]=o=>t(e).description=o),error:t(e).errors.description},null,8,["modelValue","error"]),t(e).errors.description?(i(),l("span",D,n(t(e).errors.description),1)):u("",!0),d(c,{label:"Prix",modelValue:t(e).prix,"onUpdate:modelValue":r[2]||(r[2]=o=>t(e).prix=o),type:"number",error:t(e).errors.prix},null,8,["modelValue","error"]),d(c,{label:"Stock",modelValue:t(e).stock,"onUpdate:modelValue":r[3]||(r[3]=o=>t(e).stock=o),type:"number",error:t(e).errors.stock},null,8,["modelValue","error"]),t(e).errors.stock?(i(),l("span",G,n(t(e).errors.stock),1)):u("",!0),s("div",null,[r[7]||(r[7]=s("label",{class:"mb-1 block font-medium text-[var(--primary-blue)] dark:text-[var(--dark-gold)]"}," Catégorie ",-1)),F(s("select",{"onUpdate:modelValue":r[4]||(r[4]=o=>t(e).category_id=o),required:"",class:"w-full rounded border p-2 focus:ring-2 focus:ring-[var(--primary-blue)] focus:outline-none dark:border-gray-600 dark:bg-[#2A2A2A] dark:focus:ring-[var(--dark-gold)]"},[r[6]||(r[6]=s("option",{value:"",disabled:"",class:"text-xs"},"Choisir une catégorie",-1)),(i(!0),l(m,null,f(v.categories,o=>(i(),l("option",{class:"text-xs",key:o.id,value:o.id},n(o.name),9,q))),128))],512),[[U,t(e).category_id]]),t(e).errors.category_id?(i(),l("p",z,n(t(e).errors.category_id),1)):u("",!0)]),s("div",null,[r[10]||(r[10]=s("label",{class:"mb-1 block font-medium text-[var(--primary-blue)] dark:text-[var(--dark-gold)]"},"Images *",-1)),s("div",{class:"mt-1 flex h-32 w-full cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed hover:border-[var(--primary-blue)] dark:hover:border-[var(--dark-gold)]",onClick:r[5]||(r[5]=o=>a.$refs.fileInput.click())},[r[8]||(r[8]=s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mb-2 h-8 w-8 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a2 2 0 002 2h12a2 2 0 002-2v-1M12 12V4m0 0l-4 4m4-4l4 4"})],-1)),r[9]||(r[9]=s("p",{class:"text-sm text-gray-500"},[s("span",{class:"text-purple-600"},"Cliquez pour uploader"),b(" ou glissez-déposez"),s("br"),b(" PNG, JPG, GIF, SVG, WEBP (max. 2MB) ")],-1)),s("input",{ref:"fileInput",type:"file",multiple:"",accept:"image/png, image/jpeg, image/gif, image/svg+xml, image/webp",onChange:_,class:"hidden"},null,544)]),s("div",R,[(i(!0),l(m,null,f(p.value,(o,g)=>(i(),l("div",{key:g,class:"relative"},[s("img",{src:o,class:"h-20 w-20 rounded border object-cover"},null,8,O),s("button",{type:"button",onClick:W=>h(g),class:"absolute -top-2 -right-2 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white hover:bg-red-600"}," × ",8,T)]))),128))]),t(e).errors.images?(i(),l("span",J,n(t(e).errors.images),1)):u("",!0)]),d(B,{processing:t(e).processing,label:"Enregistrer"},null,8,["processing"])],32)])])]),_:1})],64))}});export{le as default};
