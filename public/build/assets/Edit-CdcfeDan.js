import{d as w,L as $,r as S,c as d,b as a,u as r,e as U,f as C,k as s,E as F,O as g,j as b,l as n,F as u,q as x,m as p,R as k}from"./app-3lHVxEks.js";import{p as M,_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-BBeBFaYy.js";import{_ as m}from"./Input-BxYvi6GG.js";import{_ as L,a as j}from"./SubmitButton-BslpoL58.js";import{_ as q}from"./BackButton-CR_QHf0H.js";import{d as E}from"./index-BdvXPHPK.js";import"./index-BOBlRyUm.js";import"./useForwardExpose-mAhlf5jh.js";import"./VisuallyHidden-CMpbcgZZ.js";import"./RovingFocusGroup-BIqvpQk4.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BjxJdSJA.js";const B={class:"p-4"},N=["value"],P={key:0,class:"text-red-500 text-sm mt-1"},R={class:"flex gap-2 mt-2 flex-wrap"},I=["src"],O={key:0,class:"text-red-500 text-sm mt-1"},h=w({__name:"Edit",props:{product:{},categories:{}},setup(c){const l=c,e=$({title:l.product.title,description:l.product.description,prix:l.product.prix,stock:l.product.stock,category_id:l.product.category_id,status:l.product.status,images:[]}),f=S(l.product.images.map(i=>`/storage/${i.url_image}`)),_=()=>{const i=new FormData;i.append("title",e.title),i.append("description",e.description),i.append("prix",e.prix.toString()),i.append("stock",e.stock.toString()),i.append("category_id",e.category_id.toString()),i.append("status",e.status),e.images.forEach(t=>i.append("images[]",t)),e.put(`/admin/products/${l.product.id}`)},v=i=>{const t=i.target;t.files&&(e.images=Array.from(t.files),f.value=[...l.product.images.map(o=>`/storage/${o.url_image}`),...e.images.map(o=>URL.createObjectURL(o))])},y=[{title:"dashboard",href:E().url},{title:"Products List",href:M.index().url},{title:"Modifier produit",href:`/admin/products/${l.product.id}/edit`}];return(i,t)=>(n(),d(u,null,[a(r(U),{title:"Modifier un produit"}),a(D,{breadcrumbs:y},{default:C(()=>[s("div",B,[a(q,{class:"m-4"}),t[11]||(t[11]=s("h1",{class:"text-xl font-bold mb-4"},"Modifier le produit",-1)),s("form",{onSubmit:F(_,["prevent"]),class:"flex flex-col gap-4"},[a(m,{label:"Titre du produit",modelValue:r(e).title,"onUpdate:modelValue":t[0]||(t[0]=o=>r(e).title=o),error:r(e).errors.title,required:""},null,8,["modelValue","error"]),a(L,{label:"Description",modelValue:r(e).description,"onUpdate:modelValue":t[1]||(t[1]=o=>r(e).description=o),error:r(e).errors.description,rows:4},null,8,["modelValue","error"]),a(m,{label:"Prix",type:"number",modelValue:r(e).prix,"onUpdate:modelValue":t[2]||(t[2]=o=>r(e).prix=o),error:r(e).errors.prix,required:""},null,8,["modelValue","error"]),a(m,{label:"Stock",type:"number",modelValue:r(e).stock,"onUpdate:modelValue":t[3]||(t[3]=o=>r(e).stock=o),error:r(e).errors.stock,required:""},null,8,["modelValue","error"]),s("div",null,[t[7]||(t[7]=s("label",{class:"block mb-1 font-medium"},"Catégorie",-1)),g(s("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>r(e).category_id=o),class:"p-2 border rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},[t[6]||(t[6]=s("option",{value:"",disabled:"",class:"text-xs"},"Choisir une catégorie",-1)),(n(!0),d(u,null,x(c.categories,o=>(n(),d("option",{key:o.id,value:o.id,class:"text-xs"},p(o.name),9,N))),128))],512),[[k,r(e).category_id]]),r(e).errors.category_id?(n(),d("p",P,p(r(e).errors.category_id),1)):b("",!0)]),s("div",null,[t[8]||(t[8]=s("label",{class:"block mb-1 font-medium"},"Images",-1)),s("input",{type:"file",multiple:"",accept:"image/*",onChange:v,class:"block w-full"},null,32),s("div",R,[(n(!0),d(u,null,x(f.value,(o,V)=>(n(),d("img",{key:V,src:o,class:"h-20 w-20 object-cover rounded border"},null,8,I))),128))]),r(e).errors.images?(n(),d("p",O,p(r(e).errors.images),1)):b("",!0)]),s("div",null,[t[10]||(t[10]=s("label",{class:"block mb-1 font-medium"},"Statut",-1)),g(s("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>r(e).status=o),class:"p-2 border rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},[...t[9]||(t[9]=[s("option",{value:"disponible",class:"text-xs"},"Disponible",-1),s("option",{value:"indisponible",class:"text-xs"},"Indisponible",-1)])],512),[[k,r(e).status]])]),a(j,{processing:r(e).processing,label:"Mettre à jour"},null,8,["processing"])],32)])]),_:1})],64))}});export{h as default};
