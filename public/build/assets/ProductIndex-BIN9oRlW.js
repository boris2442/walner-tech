import{Q as q,R as D,S as J,y as u,c as z,l as H,I as L,a as n,e as o,f as p,g as x,b as t,u as i,h as K,J as Q,K as G,O as V,N as k,F as v,z as C,t as f,T as X,w as y,o as r,A as j,j as Y,U as Z,P as N,V as ee}from"./app-CxpOmiyy.js";import{P as te,M as ae,_ as se,a as oe}from"./pagination-BaS4kQtn.js";import{F as re}from"./FlashMessageFrontend-BXKaajDB.js";import{T as ne,N as le,L as ie,_ as de}from"./TopBanner-Cd3Y-3uU.js";import{F as ce}from"./FloatingAction-B03MXm02.js";import{L as ue,S as fe,A as me,a as ve,b as ge,_ as he}from"./Testimony-BCC16xEa.js";import{C as A,c as pe}from"./CartWidget-BCRfpZ12.js";import{F as xe}from"./FlashMessageNewsletter-DHWyIbYp.js";import{_ as ke}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-C-yLV7Y_.js";import"./index-BdvXPHPK.js";const ye={class:"dark:bg-dark-background dark:text-dark-white bg-background-light text-text-dark p-8 transition-colors duration-300"},_e={class:"relative mx-auto w-full max-w-md"},be={class:"mb-4 flex justify-start gap-3 overflow-x-auto px-2 whitespace-nowrap"},we=["onClick"],Ce={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5"},Se=["data-id"],$e={class:"overflow-hidden rounded"},Ve=["src","alt"],je=["src","alt"],Ie={class:"flex flex-1 flex-col p-3"},Fe={class:"mt-2 mb-1 truncate text-sm font-medium"},Te={class:"mt-1 flex justify-between"},Be={class:"dark:text-dark-grey text-[10px] text-gray-500"},ze={class:"rounded-full border border-[var(--accent-cyan)] px-2 py-1 font-semibold text-[var(--accent-cyan)] dark:border-[var(--dark-grey)] dark:text-[var(--dark-grey)]"},Le={class:"mt-auto flex items-center justify-between p-3 py-1"},Ne=["onClick"],Ae={class:"mt-1 flex items-center gap-1 text-sm text-gray-500"},Me={class:"text-xs"},Re=["onClick"],Pe={class:"ml-1 text-xs font-extrabold dark:text-[var(--dark-grey)]"},Oe={class:"m-2 flex items-center justify-center rounded-xl border-2 border-blue-700 px-3 py-2 text-center text-sm font-semibold text-blue-700 transition-colors duration-200 hover:bg-blue-700 hover:text-white"},Ee={key:0,class:"dark:text-dark-grey mt-6 text-center text-gray-500"},We=["src"],Ue={__name:"ProductIndex",props:{products:Array,categories:Array,filters:Object,auth:Object,seo:Object},setup(S){q.add(D,J);const g=S,h=u(g.filters.search||""),_=u(g.filters.category||""),$=u(!1),m=u(!0),b=u(!0),M=u([]),R=z(()=>window.innerWidth>=1024?20:window.innerWidth>=768?12:window.innerWidth>=640?8:4),d=u({show:!1,src:"",x:0,y:0,dx:0,dy:0});H(()=>{const a=localStorage.getItem("cart");a&&(M.value=JSON.parse(a)),$.value=localStorage.getItem("darkMode")==="true",sessionStorage.getItem("hasVisited")?(b.value=!1,m.value=!0,setTimeout(()=>{m.value=!1},1e3)):(b.value=!0,m.value=!0,setTimeout(()=>{b.value=!1,setTimeout(()=>{m.value=!1},1e3)},2e3),sessionStorage.setItem("hasVisited","true"))});const I=z(()=>g.products.filter(a=>{const s=a.title.toLowerCase().includes(h.value.toLowerCase()),c=_.value===""||a.category_id===_.value;return s&&c}));function P(a){if(!g.auth?.user){confirm(`Vous devez être connecté pour aimer un produit.
Voulez-vous vous connecter maintenant ?`)&&N.visit("/login");return}ee.post(`/like/${a.id}`).then(s=>{a.liked=s.data.liked,a.likes_count=s.data.likesCount}).catch(()=>{})}function F(a){return["border-none",_.value===a?"underline text-[var(--accent-cyan)]":"text-text-dark hover:text-[var(--accent-cyan)]"]}function T(a){_.value=a}function O(){}function E(a,s){if(!g.auth?.user){confirm(`Vous devez être connecté pour ajouter un produit au panier.
Voulez-vous vous connecter maintenant ?`)&&N.visit("/login");return}const c=a.currentTarget.closest(".product-card").querySelector("img"),w=document.querySelector(".fixed.bottom-6.right-6 button");if(!c||!w)return;const e=c.getBoundingClientRect(),l=w.getBoundingClientRect(),W=l.left+l.width/2-(e.left+e.width/2),U=l.top+l.height/2-(e.top+e.height/2);d.value={show:!0,src:c.src,x:e.left,y:e.top,dx:W,dy:U},pe.add(s),setTimeout(()=>{d.value.show=!1},800)}function B(a){return a?`/${a}`:"/fallback.png"}return(a,s)=>{const c=L("Eye"),w=L("ShoppingCartIcon");return r(),n(v,null,[o(i(K),{title:S.seo.title},null,8,["title"]),b.value?(r(),p(ue,{key:0})):x("",!0),o(ne),o(le,{auth:a.$page.props.auth,class:"mt-10 md:mt-12"},null,8,["auth"]),a.$page.props.flash?.message?(r(),p(re,{key:1,message:a.$page.props.flash.message,link:a.$page.props.flash.link},null,8,["message","link"])):x("",!0),o(ce),o(xe),t("section",null,[t("div",ye,[t("div",_e,[Q(t("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>h.value=e),onInput:O,type:"text",placeholder:"Rechercher un produit...",class:"custom-input"},null,544),[[G,h.value]]),o(i(V),{icon:"magnifying-glass",class:"custom-icon"}),h.value?(r(),n("button",{key:0,onClick:s[1]||(s[1]=e=>h.value=""),type:"button",class:"clear-btn"},"✕")):x("",!0)]),t("div",be,[t("span",{onClick:s[2]||(s[2]=e=>T("")),class:k([F(""),"inline-block cursor-pointer px-4 py-2 text-sm font-medium transition-colors duration-300 dark:text-[var(--dark-grey)]"])},"Tous",2),(r(!0),n(v,null,C(S.categories,e=>(r(),n("span",{key:e.id,onClick:l=>T(e.id),class:k([F(e.id),"inline-block cursor-pointer px-4 py-2 text-sm font-medium text-[var(--dark-blue)] transition-colors duration-300 dark:text-[var(--dark-grey)]"])},f(e.name),11,we))),128))]),s[5]||(s[5]=t("hr",{class:"mb-6 border-t border-gray-300 dark:border-[var(--dark-grey)]"},null,-1)),t("div",Ce,[m.value?(r(!0),n(v,{key:0},C(R.value,e=>(r(),n("div",{key:e,class:"product-card flex flex-col overflow-hidden rounded shadow-md"},[...s[3]||(s[3]=[X('<div class="skeleton mb-3 h-40 w-full rounded" data-v-6b1e6f2d></div><div class="flex flex-1 flex-col p-3" data-v-6b1e6f2d><div class="skeleton mb-2 h-4 w-3/4 rounded" data-v-6b1e6f2d></div><div class="skeleton h-3 w-1/2 rounded" data-v-6b1e6f2d></div></div><div class="mt-auto flex items-center justify-between p-3" data-v-6b1e6f2d><div class="skeleton h-6 w-6 rounded-full" data-v-6b1e6f2d></div><div class="skeleton h-6 w-6 rounded-full" data-v-6b1e6f2d></div></div>',3)])]))),128)):(r(),n(v,{key:1},[(r(!0),n(v,null,C(I.value,e=>(r(),n("div",{key:e.id,"data-id":e.id,class:k(["product-card flex flex-col rounded transition-transform duration-300 hover:scale-105",$.value?"border border-[var(--dark-grey)] bg-[var(--dark-background)] shadow-md":"bg-background-light shadow-md"])},[t("div",$e,[e.images.length>1?(r(),p(i(ve),{key:0,modules:[i(me),i(te)],autoplay:{delay:3e3},pagination:"",loop:""},{default:y(()=>[(r(!0),n(v,null,C(e.images,l=>(r(),p(i(fe),{key:l.id},{default:y(()=>[o(i(j),{href:`/products/${e.slug}`,prefetch:"",class:"hover:underline"},{default:y(()=>[t("img",{src:B(l.url_image),alt:e.title,loading:"lazy",class:"h-40 w-full rounded object-cover transition-transform duration-300 hover:scale-110"},null,8,Ve)]),_:2},1032,["href"])]),_:2},1024))),128))]),_:2},1032,["modules"])):(r(),p(i(j),{key:1,href:`/products/${e.slug}`,prefetch:"",class:"hover:underline"},{default:y(()=>[t("img",{src:B(e.images[0]?.url_image),alt:e.title,loading:"lazy",class:"h-40 w-full rounded object-cover transition-transform duration-300 hover:scale-110"},null,8,je)]),_:2},1032,["href"]))]),t("div",Ie,[t("h3",Fe,f(e.title),1),t("div",Te,[t("p",Be,[t("span",ze,f(e.category.name),1)]),t("p",{class:k(["text-sm font-bold",$.value?"text-dark-white":"text-text-dark"])},f(e.prix)+" FCFA",3)])]),t("div",Le,[t("button",{onClick:l=>E(l,e),"aria-label":"Bouton ajout au panier",title:"ajout au panier",class:"text-[var(--accent-cyan)] transition-transform duration-200 hover:scale-125 active:scale-90 dark:text-white"},[o(i(V),{icon:["fas","cart-shopping"]})],8,Ne),t("div",Ae,[o(c,{class:"h-4 w-4 text-gray-400"}),t("span",Me,f(e.views_count)+" vue"+f(e.views_count>1?"s":""),1)]),t("button",{onClick:l=>P(e),"aria-label":"Bouton liker le produit",title:"Liker le produit",class:k(["transition-transform duration-200 hover:scale-125 active:scale-90",e.liked?"text-red-500":"text-[var(--accent-cyan)]"])},[o(i(V),{icon:["far","heart"]}),t("span",Pe,f(e.likes_count),1)],10,Re)]),t("div",Oe,[o(i(j),{href:`/products/${e.slug}`,prefetch:"",class:"flex w-full items-center justify-center text-center dark:text-gray-300"},{default:y(()=>[o(w,{class:"animate-spin-slow mr-2"}),s[4]||(s[4]=Y(" Voir plus ",-1))]),_:1},8,["href"])])],10,Se))),128)),o(A)],64))]),!m.value&&I.value.length===0?(r(),n("div",Ee," Aucun produit trouvé ")):x("",!0),o(A)])]),o(ae),o(se),o(ge),o(oe),o(he),o(ie),o(de),d.value.show?(r(),n("img",{key:2,src:d.value.src,style:Z({top:d.value.y+"px",left:d.value.x+"px",transform:"translate("+d.value.dx+"px,"+d.value.dy+"px) scale(0.2)",transition:"transform 0.8s ease-in-out, opacity 0.8s ease-in-out",opacity:1}),class:"pointer-events-none fixed z-50 h-20 w-20 rounded-lg"},null,12,We)):x("",!0)],64)}}},tt=ke(Ue,[["__scopeId","data-v-6b1e6f2d"]]);export{tt as default};
