import{d as Y,y as g,c as T,l as W,p as q,B as G,P as C,I as J,a as l,f as K,g as S,e as d,u as v,h as O,w as M,b as t,t as r,o as a,F as f,z as x,J as $,K as Q,M as R,v as Z,A as L,j as ee,N as te,L as se}from"./app-BmZ0XcVn.js";import{p as P,_ as oe}from"./AppLayout.vue_vue_type_script_setup_true_lang-CKcdRePr.js";import{F as ae}from"./FlashMessageFrontend-DyNO3NJO.js";import{d as le}from"./index-BdvXPHPK.js";import{d as re}from"./dayjs.min-D5OIzFI-.js";import{_ as ie}from"./BackButton-1B42R4WZ.js";import{S as ne,T as ue}from"./trash-BWLNtTp4.js";import"./index-BXxCmQKh.js";import"./useForwardExpose-BpIq9nif.js";import"./VisuallyHidden-iI0nLmSo.js";import"./RovingFocusGroup-Cj5YNkPF.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BPdrAUaL.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const de={class:"flex flex-col gap-4 p-4"},ce={class:"grid gap-4 grid-cols-2 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-5"},me={class:"kpi-card"},pe={class:"kpi-text"},ge={class:"kpi-card"},ve={class:"kpi-text"},fe={class:"kpi-text"},he={class:"kpi-card"},xe={class:"kpi-text"},be={class:"flex flex-wrap gap-4 mb-4 p-2 items-center"},ye={class:"relative flex-1 min-w-[400px]"},_e={class:"relative max-w-[350px] mx-auto"},ke=["value"],we={class:"relative global-menu"},Te={key:0,class:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border rounded shadow-lg z-50"},Ce={class:"grid gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5"},Se=["onTouchstart","onTouchmove","onTouchend"],Me=["src","alt"],$e={key:1,class:"w-full h-full bg-gray-200 flex items-center justify-center rounded"},Le={class:"absolute bottom-2 right-2 flex gap-2 z-50"},Pe=["onClick"],je={class:"flex-1 flex flex-col justify-between mt-2 px-2 pb-2"},Ee={class:"font-bold truncate"},Ie={class:"text-sm text-gray-600 dark:text-gray-300"},ze={class:"flex justify-between items-center mt-1"},Fe={class:"font-semibold"},Ne={class:"flex items-center text-gray-600 dark:text-gray-300 text-sm"},Ve={class:"text-xs"},Be={class:"flex justify-center mt-6 mb-10"},De={class:"inline-flex gap-2"},Ae=["innerHTML","onClick"],tt=Y({__name:"Index",props:{products:{},stats:{},filters:{},categories:{}},setup(j){const n=j,c=g(n.filters.search||""),p=g(n.filters.category||""),b=g(!1);function E(e){return e?`/${e}`:"/fallback.png"}const I=T(()=>n.products.data.map(e=>({...e,images:e.images.length?e.images.map(s=>({path:s.url_image})):[]}))),h=T(()=>{let e=I.value;return c.value&&(e=e.filter(s=>s.title.toLowerCase().includes(c.value.toLowerCase()))),p.value&&(e=e.filter(s=>s.category?.id==p.value)),e}),z=e=>{confirm("Voulez-vous vraiment supprimer ce produit ?")&&se.Inertia.delete(`/admin/products/${e}`,{preserveScroll:!0})},m=g({});let y=null;W(()=>{y=setInterval(()=>{h.value.forEach(e=>{e.images.length>1&&(m.value[e.id]=((m.value[e.id]||0)+1)%e.images.length)})},3e3)}),q(()=>{y&&clearInterval(y)});const _=g({}),k=g({});function F(e,s){_.value[s]=e.touches[0].clientX}function N(e,s){k.value[s]=e.touches[0].clientX}function V(e){const s=_.value[e],u=k.value[e];if(s!=null&&u!=null){const o=s-u;if(o>50)m.value[e]=(m.value[e]+1)%h.value.find(i=>i.id===e)?.images.length;else if(o<-50){const i=h.value.find(X=>X.id===e)?.images.length;m.value[e]=(m.value[e]-1+i)%i}}_.value[e]=0,k.value[e]=0}const B=[{title:"dashboard",href:le().url},{title:"Products List",href:P.index().url}],D=T(()=>n.products.data.reduce((e,s)=>e+s.likes_count,0));let w=null;const A=e=>{e&&C.visit(e,{preserveScroll:!0,preserveState:!0,only:["products"]})};G([c,p],([e,s])=>{w&&clearTimeout(w),w=window.setTimeout(()=>{const u={};e&&(u.search=e),s&&(u.category=s),C.visit("/admin/products",{method:"get",params:u,preserveState:!0,replace:!0,only:["products"],preserveScroll:!0})},600)});function H(){c.value="",C.visit("/admin/products",{data:{category:p.value||void 0},preserveState:!0,replace:!0,only:["products"]})}function U(e){return re(e).format("DD/MM/YYYY HH:mm")}return(e,s)=>{const u=J("font-awesome-icon");return a(),l(f,null,[e.$page.props.flash?.message?(a(),K(ae,{key:0,message:e.$page.props.flash.message,link:e.$page.props.flash.link},null,8,["message","link"])):S("",!0),d(v(O),{title:"Produits"}),d(oe,{breadcrumbs:B},{default:M(()=>[t("div",de,[d(ie,{class:"m-4"}),t("div",ce,[t("div",me,[s[4]||(s[4]=t("div",{class:"kpi-icon"},"ðŸ†•",-1)),t("div",pe,[s[3]||(s[3]=t("h3",null,"Total Produits",-1)),t("p",null,r(n.stats.total),1)])]),t("div",ge,[s[6]||(s[6]=t("div",{class:"kpi-icon"},"ðŸ†•",-1)),t("div",ve,[s[5]||(s[5]=t("h3",null,"AjoutÃ©s cette semaine",-1)),t("p",null,r(n.stats.addedThisWeek),1)])]),(a(!0),l(f,null,x(n.stats.byCategory,o=>(a(),l("div",{key:o.category?.id,class:"kpi-card"},[s[7]||(s[7]=t("div",{class:"kpi-icon"},"ðŸ†•",-1)),t("div",fe,[t("h3",null,r(o.category?.name||"Non catÃ©gorisÃ©"),1),t("p",null,r(o.count),1)])]))),128)),t("div",he,[s[9]||(s[9]=t("div",{class:"kpi-icon"},"ðŸ†•",-1)),t("div",xe,[s[8]||(s[8]=t("h3",null,"Total Likes",-1)),t("p",null,r(D.value),1)])])]),s[13]||(s[13]=t("h1",{class:"text-xl font-bold mb-4 text-[var(--primary-blue)] dark:text-[var(--dark-gold)] my-2"}," Produits ",-1)),t("div",be,[t("div",ye,[t("div",_e,[d(u,{icon:"magnifying-glass",class:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"}),$(t("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>c.value=o),type:"text",placeholder:"Search...",class:"custom-input pl-10 pr-10 max-w-[300px]"},null,512),[[Q,c.value]]),c.value?(a(),l("button",{key:0,onClick:H,type:"button",class:"absolute right-15 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 text-lg leading-none z-10"}," âœ• ")):S("",!0)])]),$(t("select",{"onUpdate:modelValue":s[1]||(s[1]=o=>p.value=o),class:"border p-2 rounded min-w-[160px]"},[s[10]||(s[10]=t("option",{value:"",class:"text-xs"},"Toutes les catÃ©gories",-1)),(a(!0),l(f,null,x(n.categories,o=>(a(),l("option",{class:"text-xs",key:o.id,value:o.id},r(o.name),9,ke))),128))],512),[[R,p.value]]),t("div",we,[t("button",{onClick:s[2]||(s[2]=Z(o=>b.value=!b.value,["stop"])),class:"p-2 border rounded hover:bg-gray-100 dark:hover:bg-gray-700"},"â‹®"),b.value?(a(),l("div",Te,[t("ul",null,[t("li",null,[d(v(L),{prefetch:"",href:v(P).create().url,class:"block px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm"},{default:M(()=>[...s[11]||(s[11]=[ee(" CrÃ©er un produit ",-1)])]),_:1},8,["href"])])])])):S("",!0)])]),t("div",Ce,[(a(!0),l(f,null,x(h.value,o=>(a(),l("div",{key:o.id,class:"border rounded flex flex-col gap-2 bg-white dark:bg-[#1E1E1E] relative overflow-hidden"},[t("div",{class:"relative rounded min-h-[160px] sm:min-h-[200px] md:min-h-[240px] lg:min-h-[260px]",onTouchstart:i=>F(i,o.id),onTouchmove:i=>N(i,o.id),onTouchend:()=>V(o.id)},[o.images.length?(a(),l("img",{key:0,src:E(o.images[m.value[o.id]||0]?.path),alt:o.title,class:"w-full h-full object-cover rounded transition-opacity duration-700",loading:"lazy"},null,8,Me)):(a(),l("div",$e,[...s[12]||(s[12]=[t("span",{class:"text-gray-500 text-sm"},"Aucune image",-1)])])),t("div",Le,[d(v(L),{href:`/admin/products/${o.id}/edit`,prefetch:"",class:"p-1 bg-blue-500 text-white rounded hover:bg-blue-600"},{default:M(()=>[d(v(ne),{class:"w-4 h-4"})]),_:1},8,["href"]),t("button",{onClick:i=>z(o.id),class:"p-1 bg-red-500 text-white rounded hover:bg-red-600"},[d(v(ue),{class:"w-4 h-4"})],8,Pe)])],40,Se),t("div",je,[t("h3",Ee,r(o.title),1),t("p",Ie,r(o.category?.name||"Non catÃ©gorisÃ©"),1),t("div",ze,[t("p",Fe,r(o.prix)+" FCFA",1),t("div",Ne," â¤ï¸ "+r(o.likes_count),1)])]),t("p",null,[t("i",Ve,"creer le "+r(U(o.created_at)),1)])]))),128))]),t("div",Be,[t("nav",De,[(a(!0),l(f,null,x(n.products.links,o=>(a(),l("button",{key:o.label,innerHTML:o.label,onClick:i=>A(o.url),class:te(["px-3 py-1 border rounded text-sm transition",{"bg-blue-600 text-white border-blue-600":o.active,"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700":!o.active,"opacity-50 cursor-not-allowed":!o.url}])},null,10,Ae))),128))])])])]),_:1})],64)}}});export{tt as default};
