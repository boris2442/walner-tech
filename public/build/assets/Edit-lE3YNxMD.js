import{d as w,E as $,y as S,a as d,e as a,u as r,h as U,w as C,b as s,v as F,G as g,j as b,o as n,F as u,z as x,t as p,J as k}from"./app-CvgTuPAn.js";import{_ as M}from"./AppLayout.vue_vue_type_script_setup_true_lang-DRL2Xeim.js";import{_ as m,a as D,b as j}from"./SubmitButton-C60xi0k1.js";import{_ as E}from"./BackButton-DIgvxdEV.js";import"./index-B7rjenF_.js";import"./useForwardExpose-Cq_YTrM4.js";import"./VisuallyHidden-CnsOLLM7.js";import"./RovingFocusGroup-B71jWLgx.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./index-BdvXPHPK.js";import"./createLucideIcon-CSeaxrzf.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-hywC6vGG.js";import"./index-DvlQtT1N.js";const q={class:"p-4"},B=["value"],L={key:0,class:"text-red-500 text-sm mt-1"},N={class:"flex gap-2 mt-2 flex-wrap"},P=["src"],I={key:0,class:"text-red-500 text-sm mt-1"},Z=w({__name:"Edit",props:{product:{},categories:{}},setup(c){const l=c,e=$({title:l.product.title,description:l.product.description,prix:l.product.prix,stock:l.product.stock,category_id:l.product.category_id,status:l.product.status,images:[]}),f=S(l.product.images.map(i=>`/storage/${i.url_image}`)),v=()=>{const i=new FormData;i.append("title",e.title),i.append("description",e.description),i.append("prix",e.prix.toString()),i.append("stock",e.stock.toString()),i.append("category_id",e.category_id.toString()),i.append("status",e.status),e.images.forEach(t=>i.append("images[]",t)),e.put(`/admin/products/${l.product.id}`)},y=i=>{const t=i.target;t.files&&(e.images=Array.from(t.files),f.value=[...l.product.images.map(o=>`/storage/${o.url_image}`),...e.images.map(o=>URL.createObjectURL(o))])},V=[{title:"Produits",href:"/admin/products"},{title:"Modifier",href:`/admin/products/${l.product.id}/edit`}];return(i,t)=>(n(),d(u,null,[a(r(U),{title:"Modifier un produit"}),a(M,{breadcrumbs:V},{default:C(()=>[s("div",q,[a(E,{class:"m-4"}),t[11]||(t[11]=s("h2",{class:"text-xl font-bold mb-4"},"Modifier le produit",-1)),s("form",{onSubmit:F(v,["prevent"]),class:"flex flex-col gap-4"},[a(m,{label:"Titre du produit",modelValue:r(e).title,"onUpdate:modelValue":t[0]||(t[0]=o=>r(e).title=o),error:r(e).errors.title,required:""},null,8,["modelValue","error"]),a(D,{label:"Description",modelValue:r(e).description,"onUpdate:modelValue":t[1]||(t[1]=o=>r(e).description=o),error:r(e).errors.description,rows:4},null,8,["modelValue","error"]),a(m,{label:"Prix",type:"number",modelValue:r(e).prix,"onUpdate:modelValue":t[2]||(t[2]=o=>r(e).prix=o),error:r(e).errors.prix,required:""},null,8,["modelValue","error"]),a(m,{label:"Stock",type:"number",modelValue:r(e).stock,"onUpdate:modelValue":t[3]||(t[3]=o=>r(e).stock=o),error:r(e).errors.stock,required:""},null,8,["modelValue","error"]),s("div",null,[t[7]||(t[7]=s("label",{class:"block mb-1 font-medium"},"Catégorie",-1)),g(s("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>r(e).category_id=o),class:"p-2 border rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},[t[6]||(t[6]=s("option",{value:"",disabled:""},"Choisir une catégorie",-1)),(n(!0),d(u,null,x(c.categories,o=>(n(),d("option",{key:o.id,value:o.id},p(o.name),9,B))),128))],512),[[k,r(e).category_id]]),r(e).errors.category_id?(n(),d("p",L,p(r(e).errors.category_id),1)):b("",!0)]),s("div",null,[t[8]||(t[8]=s("label",{class:"block mb-1 font-medium"},"Images",-1)),s("input",{type:"file",multiple:"",accept:"image/*",onChange:y,class:"block w-full"},null,32),s("div",N,[(n(!0),d(u,null,x(f.value,(o,_)=>(n(),d("img",{key:_,src:o,class:"h-20 w-20 object-cover rounded border"},null,8,P))),128))]),r(e).errors.images?(n(),d("p",I,p(r(e).errors.images),1)):b("",!0)]),s("div",null,[t[10]||(t[10]=s("label",{class:"block mb-1 font-medium"},"Statut",-1)),g(s("select",{"onUpdate:modelValue":t[5]||(t[5]=o=>r(e).status=o),class:"p-2 border rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},[...t[9]||(t[9]=[s("option",{value:"disponible"},"Disponible",-1),s("option",{value:"indisponible"},"Indisponible",-1)])],512),[[k,r(e).status]])]),a(j,{processing:r(e).processing,label:"Mettre à jour"},null,8,["processing"])],32)])]),_:1})],64))}});export{Z as default};
